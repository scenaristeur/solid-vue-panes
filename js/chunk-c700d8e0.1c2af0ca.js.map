{"version":3,"sources":["webpack:///./src/components/editor/EditorNetwork.vue?a597","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/components/editor/EditorNetwork.vue?ddf3","webpack:///./src/mixins/TripleMixin.js","webpack:///src/components/editor/EditorNetwork.vue","webpack:///./src/components/editor/EditorNetwork.vue?d9ee","webpack:///./src/components/editor/EditorNetwork.vue?da55","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["$","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","this","len","length","actualStart","argumentsLength","arguments","TypeError","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","file","url","_s","node","label","model","value","callback","$$v","filename","expression","on","create","privacy","clear","copy","openCommand","ref","nodes","edges","options","selectNode","selectEdge","saveNode","saveEdge","edge","inputNew","saveCommand","command","staticRenderFns","data","commandHistory","methods","getInputType","iv","inputObject","isValidUrl","type","isFile","firstChar","charAt","last","catchCommande","s","p","o","traiteTriplet","catchTriplet","message","result","lastChar","slice","messageCut","split","isTriplet","detectLiteral","messageCutTemp","forEach","part","trim","startsWith","push","substr","endsWith","pop","indexOf","console","log","tripletvalue","subject","predicate","object","triplet","subjectNode","filter","el","objectNode","id","$refs","network","writeEdgeToFile","catchTriplet1","sujetNode","body","get","objetNode","sub_n","color","border","document","getElementById","background","add","obj_n","inherit","commande","style","display","downloadCanvas","exportTtl","n","cid","e","listeInfos","Array","listeComplementaire","i","sujet","propriete","replace","objet","sujetLabel","objetLabel","error","sujetWithPrefix","validRdf","proprieteWithPrefix","objetWithPrefix","typedeProp","indiceTypeDeProp","toLowerCase","uniq_fast","sort","l","a","seen","out","j","item","string","valid","srcCanvas","childNodes","canvas","destinationCanvas","createElement","width","height","destCtx","getContext","fillStyle","fillRect","drawImage","image","toDataURL","tmpLink","download","href","appendChild","click","removeChild","pathname","URL","_","traiteInput","io","params","source","name","components","mixins","networkMixin","self","net","arrows","scaling","smooth","interaction","navigationButtons","manipulation","enabled","initiallyActive","addNode","editNode","addEdge","editEdge","created","folder","$store","state","solid","update","tmp_file","$bvModal","show","r","confirm","cb","editEdgeWithoutDrag","index","map","x","networkEvent","eventName","navigator","clipboard","writeText","copyText","then","app","makeToast","sendActivity","addTriplet","colorize","t","colorO","addOrNothingNode","propertyEdge","watch","computed","component","$map","callbackfn","undefined"],"mappings":"kHAAA,W,kCCCA,IAAIA,EAAI,EAAQ,QACZC,EAAkB,EAAQ,QAC1BC,EAAY,EAAQ,QACpBC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAqB,EAAQ,QAC7BC,EAAiB,EAAQ,QACzBC,EAA+B,EAAQ,QACvCC,EAA0B,EAAQ,QAElCC,EAAsBF,EAA6B,UACnDG,EAAiBF,EAAwB,SAAU,CAAEG,WAAW,EAAMC,EAAG,EAAGC,EAAG,IAE/EC,EAAMC,KAAKD,IACXE,EAAMD,KAAKC,IACXC,EAAmB,iBACnBC,EAAkC,kCAKtClB,EAAE,CAAEmB,OAAQ,QAASC,OAAO,EAAMC,QAASZ,IAAwBC,GAAkB,CACnFY,OAAQ,SAAgBC,EAAOC,GAC7B,IAIIC,EAAaC,EAAmBC,EAAGC,EAAGC,EAAMC,EAJ5CC,EAAI3B,EAAS4B,MACbC,EAAM9B,EAAS4B,EAAEG,QACjBC,EAAclC,EAAgBsB,EAAOU,GACrCG,EAAkBC,UAAUH,OAWhC,GATwB,IAApBE,EACFX,EAAcC,EAAoB,EACL,IAApBU,GACTX,EAAc,EACdC,EAAoBO,EAAME,IAE1BV,EAAcW,EAAkB,EAChCV,EAAoBV,EAAIF,EAAIZ,EAAUsB,GAAc,GAAIS,EAAME,IAE5DF,EAAMR,EAAcC,EAAoBT,EAC1C,MAAMqB,UAAUpB,GAGlB,IADAS,EAAItB,EAAmB0B,EAAGL,GACrBE,EAAI,EAAGA,EAAIF,EAAmBE,IACjCC,EAAOM,EAAcP,EACjBC,KAAQE,GAAGzB,EAAeqB,EAAGC,EAAGG,EAAEF,IAGxC,GADAF,EAAEO,OAASR,EACPD,EAAcC,EAAmB,CACnC,IAAKE,EAAIO,EAAaP,EAAIK,EAAMP,EAAmBE,IACjDC,EAAOD,EAAIF,EACXI,EAAKF,EAAIH,EACLI,KAAQE,EAAGA,EAAED,GAAMC,EAAEF,UACbE,EAAED,GAEhB,IAAKF,EAAIK,EAAKL,EAAIK,EAAMP,EAAoBD,EAAaG,WAAYG,EAAEH,EAAI,QACtE,GAAIH,EAAcC,EACvB,IAAKE,EAAIK,EAAMP,EAAmBE,EAAIO,EAAaP,IACjDC,EAAOD,EAAIF,EAAoB,EAC/BI,EAAKF,EAAIH,EAAc,EACnBI,KAAQE,EAAGA,EAAED,GAAMC,EAAEF,UACbE,EAAED,GAGlB,IAAKF,EAAI,EAAGA,EAAIH,EAAaG,IAC3BG,EAAEH,EAAIO,GAAeE,UAAUT,EAAI,GAGrC,OADAG,EAAEG,OAASD,EAAMP,EAAoBD,EAC9BE,M,yCCnEX,IAAIY,EAAS,WAAa,IAAIC,EAAIR,KAASS,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAe,CAACL,EAAIM,GAAG,wBAAwBH,EAAG,QAAQ,CAACH,EAAIM,GAAG,WAAWH,EAAG,IAAI,CAACI,MAAM,CAAC,KAAOP,EAAIQ,KAAKC,IAAI,OAAS,WAAW,CAACT,EAAIM,GAAGN,EAAIU,GAAGV,EAAIQ,KAAKC,QAAQN,EAAG,MAAMH,EAAIM,GAAG,UAAUN,EAAIU,GAAGV,EAAIW,KAAKC,QAAQT,EAAG,QAAQA,EAAG,UAAU,CAACI,MAAM,CAAC,YAAc,8CAA8CM,MAAM,CAACC,MAAOd,EAAY,SAAEe,SAAS,SAAUC,GAAMhB,EAAIiB,SAASD,GAAKE,WAAW,cAAcf,EAAG,WAAW,CAACgB,GAAG,CAAC,MAAQnB,EAAIoB,SAAS,CAACpB,EAAIM,GAAG,SAASH,EAAG,kBAAkB,CAACE,YAAY,MAAME,MAAM,CAAC,GAAK,aAAa,KAAO,aAAa,MAAQ,eAAe,kBAAkB,gBAAgB,QAAU,IAAIM,MAAM,CAACC,MAAOd,EAAW,QAAEe,SAAS,SAAUC,GAAMhB,EAAIqB,QAAQL,GAAKE,WAAW,YAAY,CAAClB,EAAIM,GAAG,kCAAkCH,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,KAAK,QAAU,WAAWY,GAAG,CAAC,MAAQnB,EAAIsB,QAAQ,CAACtB,EAAIM,GAAG,WAAWH,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,KAAK,QAAU,WAAWY,GAAG,CAAC,MAAQnB,EAAIuB,OAAO,CAACvB,EAAIM,GAAG,UAAUH,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,KAAK,QAAU,WAAWY,GAAG,CAAC,MAAQnB,EAAIwB,cAAc,CAACxB,EAAIM,GAAG,aAAaH,EAAG,UAAU,CAACsB,IAAI,UAAUpB,YAAY,UAAUE,MAAM,CAAC,MAAQP,EAAI0B,MAAM,MAAQ1B,EAAI2B,MAAM,QAAU3B,EAAI4B,SAAST,GAAG,CAAC,cAAcnB,EAAI6B,WAAW,cAAc7B,EAAI8B,cAAc3B,EAAG,YAAY,CAACgB,GAAG,CAAC,GAAKnB,EAAI+B,UAAUlB,MAAM,CAACC,MAAOd,EAAQ,KAAEe,SAAS,SAAUC,GAAMhB,EAAIW,KAAKK,GAAKE,WAAW,UAAUf,EAAG,YAAY,CAACgB,GAAG,CAAC,GAAKnB,EAAIgC,UAAUnB,MAAM,CAACC,MAAOd,EAAQ,KAAEe,SAAS,SAAUC,GAAMhB,EAAIiC,KAAKjB,GAAKE,WAAW,UAAUf,EAAG,eAAe,CAACI,MAAM,CAAC,SAAWP,EAAIkC,UAAUf,GAAG,CAAC,GAAKnB,EAAImC,aAAatB,MAAM,CAACC,MAAOd,EAAW,QAAEe,SAAS,SAAUC,GAAMhB,EAAIoC,QAAQpB,GAAKE,WAAW,cAAc,IACjuDmB,EAAkB,G,wPCAP,G,sEAAA,CACbC,KADa,WAEX,MAAO,CACLC,eAAgB,KAGpBC,QAAS,CACPC,aADO,SACMC,GACX,IAAIC,EAAc,GAGlB,GAAInD,KAAKoD,WAAWF,GAClBC,EAAYE,KAAO,MACnBF,EAAY7B,MAAQ4B,EACpBC,EAAYG,OAAStD,KAAKsD,OAAOJ,OAC9B,CAEH,IAAIK,EAAYL,EAAGM,OAAO,GACtBC,EAAO,GACX,OAAOF,GACL,IAAK,IAILJ,EAAYE,KAAO,WACnBF,EAAY7B,MAAQ4B,EACpBC,EAAYT,SAAW,GACvB1C,KAAK0D,cAAcP,GACnB,MAEA,IAAK,IACLM,EAAOzD,KAAK+C,eAAe/C,KAAK+C,eAAe7C,OAAO,GACtDiD,EAAYT,SAAWe,EAAKE,EAAE,IAAIF,EAAKG,EAAE,IAAIH,EAAKI,EAClD,MAEA,IAAK,IACLJ,EAAOzD,KAAK+C,eAAe/C,KAAK+C,eAAe7C,OAAO,GACtDiD,EAAYT,SAAWe,EAAKE,EAAE,IAAIF,EAAKG,EAAE,IACzC,MAEA,IAAK,IACLH,EAAOzD,KAAK+C,eAAe/C,KAAK+C,eAAe7C,OAAO,GACtDiD,EAAYT,SAAWe,EAAKE,EAAE,IAC9B,MAGA,QAEAR,EAAcnD,KAAK8D,cAAcZ,GACjClD,KAAK+D,aAAaZ,IAOtB,OAAOA,GAETW,cApDO,SAoDOE,GACZ,IAAIC,EAAS,GACTvB,EAAW,GACXwB,EAAWF,EAAQG,OAAO,GAC1BC,EAAaJ,EAAQG,MAAM,GAAG,GAAGE,MAAM,KACvCC,GAAY,EAGZC,EAAgB,GAChBC,EAAiB,GAsBrB,OArBAJ,EAAWK,SAAQ,SAASC,GAC1BA,EAAOA,EAAKC,OAERD,EAAKE,WAAW,MAClBL,EAAe,QAEfC,EAAeK,KAAKH,EAAKI,OAAO,KACxBJ,EAAKK,SAAS,MACtBR,EAAgB,MAEhBC,EAAeK,KAAKL,EAAeQ,MAAM,IAAIN,EAAKP,MAAM,GAAG,KAClC,SAAjBI,EAERC,EAAeK,KAAKL,EAAeQ,MAAM,IAAIN,GAE7CF,EAAeK,KAAKH,MAGpBF,EAAetE,OAAS,IAC1BkE,EAAaI,GAERN,GACL,IAAK,IACLxB,EAAW,GACX,MACA,IAAK,IAEHA,EADE0B,EAAW,GAAGa,QAAQ,MAAQ,EACrB,IAAIb,EAAW,GAAf,KAEAA,EAAW,GAAG,IAE3B,MACA,IAAK,IAEH1B,EADE0B,EAAW,GAAGa,QAAQ,MAAQ,EACrB,IAAIb,EAAW,GAAG,KAElBA,EAAW,GAAG,IAEvBA,EAAW,GAAGa,QAAQ,MAAQ,EAChCvC,GAAY,IAAI0B,EAAW,GAAG,KAE9B1B,GAAY0B,EAAW,GAAG,IAE5B,MACA,IAAK,IAEH1B,EADE0B,EAAW,GAAGa,QAAQ,MAAQ,EACrB,IAAIb,EAAW,GAAf,KAEAA,EAAW,GAAG,IAE3B,MACA,QACAc,QAAQC,IAAI,mBAAmBnB,GAI/BtB,EAAW,GACX4B,GAAY,EAEd,GAAIA,EAAU,CAEZL,EAAOZ,KAAO,UACd,IAAI+B,EAAe,GACnBA,EAAaC,QAAUjB,EAAW,GAClCgB,EAAaE,UAAYlB,EAAW,GACpCgB,EAAaG,OAASnB,EAAW,GACjCH,EAAO3C,MAAQ8D,EACfnB,EAAOvB,SAAWA,OAGlBuB,EAAOZ,KAAO,UACdY,EAAO3C,MAAQ0C,EACfC,EAAOvB,SAAWA,EAGpB,OAAOuB,GAGTF,aA5IO,SA4IMyB,GACX,IAAIH,EAAUG,EAAQlE,MAAM+D,QACxBC,EAAYE,EAAQlE,MAAMgE,UAC1BC,EAASC,EAAQlE,MAAMiE,OAEvBE,EAAezF,KAAKkC,MAAMwD,QAAO,SAASC,GAC5C,OAAOA,EAAGvE,OAASiE,KAEjBO,EAAc5F,KAAKkC,MAAMwD,QAAO,SAASC,GAC3C,OAAOA,EAAGvE,OAASmE,KAErBL,QAAQC,IAAIG,EAAWG,EAAaG,GACX,GAAtBH,EAAYvF,SACbuF,EAAc,CAACI,GAAG7F,KAAKgB,KAAKC,IAAI,IAAIoE,EAAUjE,MAAMiE,GAGpDrF,KAAKkC,MAAM2C,KAAKY,IAKS,GAArBG,EAAW1F,SACf0F,EAAa,CAACC,GAAG7F,KAAKgB,KAAKC,IAAI,IAAIsE,EAAQnE,MAAOmE,GAElDvF,KAAKkC,MAAM2C,KAAKe,IAMlBV,QAAQC,IAAInF,KAAK8F,MAAMC,QAAQ7D,OAC/BuD,EAAezF,KAAK8F,MAAMC,QAAQ7D,MAAMwD,QAAO,SAASC,GACtD,OAAOA,EAAGvE,OAASiE,KAErBO,EAAc5F,KAAK8F,MAAMC,QAAQ7D,MAAMwD,QAAO,SAASC,GACrD,OAAOA,EAAGvE,OAASmE,KAErBE,EAAcA,EAAY,GAC1BG,EAAaA,EAAW,GACxBV,QAAQC,IAAIM,EAAaG,GACzB,IAAMnD,EAAO,CAAC5C,KAAM4F,EAAYI,GAAI/F,GAAG8F,EAAWC,GAAIzE,MAAOkE,GAC7DtF,KAAKmC,MAAM0C,KAAKpC,GAChByC,QAAQC,IAAI1C,GACZzC,KAAKgG,gBAAgBvD,IAoBvBwD,cA3MO,SA2MOT,GAEZ,IAAIH,EAAUG,EAAQlE,MAAM+D,QACxBC,EAAYE,EAAQlE,MAAMgE,UAC1BC,EAASC,EAAQlE,MAAMiE,OAKvBW,EAAYlG,KAAK+F,QAAQI,KAAKrD,KAAKZ,MAAMkE,IAAI,CAC/CV,OAAQ,SAASvE,GAEf,OAAQA,EAAKC,OAASiE,KAGtBgB,EAAYrG,KAAK+F,QAAQI,KAAKrD,KAAKZ,MAAMkE,IAAI,CAC/CV,OAAQ,SAASvE,GAEf,OAAQA,EAAKC,OAASmE,KAM1B,GAAwB,GAApBW,EAAUhG,OAAY,CACxB,IAAIoG,EAAQ,CAAClF,MAAOiE,EAASkB,MAAM,CACjCC,OAASC,SAASC,eAAe,qBAAqBpF,MACtDqF,WAAaF,SAASC,eAAe,mBAAmBpF,QAE1DtB,KAAK+F,QAAQI,KAAKrD,KAAKZ,MAAM0E,IAAIN,GAEnC,GAAwB,GAApBD,EAAUnG,OAAY,CACxB,IAAI2G,EAAQ,CAACzF,MAAOmE,EAAQgB,MAAM,CAChCC,OAASC,SAASC,eAAe,qBAAqBpF,MACtDqF,WAAaF,SAASC,eAAe,mBAAmBpF,QAE1DtB,KAAK+F,QAAQI,KAAKrD,KAAKZ,MAAM0E,IAAIC,GAGnCX,EAAYlG,KAAK+F,QAAQI,KAAKrD,KAAKZ,MAAMkE,IAAI,CAC3CV,OAAQ,SAASvE,GACf,OAAQA,EAAKC,OAASiE,KAG1BgB,EAAYrG,KAAK+F,QAAQI,KAAKrD,KAAKZ,MAAMkE,IAAI,CAC3CV,OAAQ,SAASvE,GAEf,OAAQA,EAAKC,OAASmE,KAG1BvF,KAAK+F,QAAQI,KAAKrD,KAAKX,MAAMyE,IAAI,CAC/BxF,MAAOkE,EACPzF,KAAOqG,EAAU,GAAGL,GACpB/F,GAAKuG,EAAU,GAAGR,GAClBU,MAAO,CAACO,QAAQ,UAIlB,IAAIrE,EAAOzC,KAAK+F,QAAQI,KAAKrD,KAAKX,MAAMiE,IAAI,CAC1CV,OAAQ,SAASjD,GACf,OAAQA,EAAK5C,MAAQqG,EAAU,GAAGL,IAAMpD,EAAK3C,IAAMuG,EAAU,GAAGR,IAAMpD,EAAKrB,OAASkE,KAGxFJ,QAAQC,IAAI,2BAA2B1C,IASzCiB,cAnRO,SAmROqD,GAEZ,OADA7B,QAAQC,IAAI4B,GACLA,EAASzF,OACd,IAAK,KACL,IAAK,QACL,IAAK,QAEL4D,QAAQC,IAAI,QAGZ,MACA,IAAK,KACL,IAAK,UACL,IAAK,cACLD,QAAQC,IAAI,cAKZ,MACA,IAAK,KACLD,QAAQC,IAAI,aAMZ,MACA,IAAK,KACL,IAAK,UACL,IAAK,cACLD,QAAQC,IAAI,UACZsB,SAASC,eAAe,gBAAgBM,MAAMC,QAAU,QACxD,MACA,IAAK,KACL/B,QAAQC,IAAI,eACZsB,SAASC,eAAe,oBAAoBM,MAAMC,QAAU,QAC5D,MACA,IAAK,KACL/B,QAAQC,IAAI,eACZsB,SAASC,eAAe,iBAAiBM,MAAMC,QAAU,QAIzD,MACA,IAAK,KACL/B,QAAQC,IAAI,mBAIZ,MACA,IAAK,KACLD,QAAQC,IAAI,aAEZnF,KAAK8B,QAEL,MACA,IAAK,KACLoD,QAAQC,IAAI,mCACZ,MACA,IAAK,KAELnF,KAAKkH,iBACL,MACA,QACAhC,QAAQC,IAAI,aAAc4B,KAiB9BI,UArWO,SAqWGpB,GAMR,IAAI7D,EAAQ6D,EAAQI,KAAKrD,KAAKZ,MAAMkE,IAAI,CACtCV,OAAQ,SAAU0B,GAChB,OAAiB,GAATA,EAAEC,OAGVlF,EAAQ4D,EAAQI,KAAKrD,KAAKX,MAAMiE,IAAI,CACtCV,OAAQ,SAAU4B,GAChB,OAAiB,GAATA,EAAED,OAGdnC,QAAQC,IAAI,eACZD,QAAQC,IAAIjD,GACZgD,QAAQC,IAAIhD,GA0Bd,IAHA,IAAIoF,EAAa,IAAIC,MACjBC,EAAsB,IAAID,MAErBE,EAAI,EAAGA,EAAIvF,EAAMjC,OAAQwH,IAAK,CACrC,IAAIjF,EAAON,EAAMuF,GAEbC,EAAQlF,EAAK5C,KACb+H,EAAYnF,EAAKrB,MAAMyG,QAAQ,MAAO,KACtCC,EAAQrF,EAAK3C,GAMjBoF,QAAQC,IAAI2C,GAGZ,IAAIC,EAAahC,EAAQI,KAAKrD,KAAKZ,MAAMkE,IAAIuB,GAAOvG,MAAMyG,QAAQ,MAAO,IACzE,IACE,IAAIG,EAAajC,EAAQI,KAAKrD,KAAKZ,MAAMkE,IAAI0B,GAAO1G,MAAMyG,QAAQ,MAAO,IAC1E,MAAMI,GAEL/C,QAAQ+C,MAAM,qBACd/C,QAAQ+C,MAAMA,GAShB,IAAIC,EAAkBlI,KAAKmI,SAASpC,EAAS4B,GACzCS,EAAsBpI,KAAKmI,SAASpC,EAAS6B,GAC7CS,EAAkBrI,KAAKmI,SAASpC,EAAS+B,IAER,GAAjCI,EAAgBjD,QAAQ,OAC1BiD,EAAkB,KAAOA,IAGc,GAArCE,EAAoBnD,QAAQ,OAC9BmD,EAAsB,IAAMA,IAIO,GAAjCC,EAAgBpD,QAAQ,OAC1BoD,EAAkB,KAAOA,GAI3B,IAAIC,EAAa,CAAC,yBAA0B,qBAAsB,wBAC9DC,EAAmB,EAGG,QAAvBH,GACuB,SAAvBA,GACuB,YAAvBA,GACuB,MAAvBA,GACuB,WAAvBA,GACuB,YAAvBA,GACuB,SAAvBA,GAEDA,EAAsB,WACtBX,EAAoB5C,KAAKwD,EAAkB,4BAC3CE,EAAmB,GACc,cAAvBH,GAAgE,eAAvBA,GAAiE,mBAAvBA,EAC7FA,EAAsB,kBAES,UAAvBA,GAA4D,WAAvBA,GAC7CA,EAAsB,aACtBG,GAAoB,GAGkB,YAArCH,EAAoBI,eACiB,UAArCJ,EAAoBI,eACiB,WAArCJ,EAAoBI,eACiB,aAArCJ,EAAoBI,eACnBJ,EAAsB,cACtBG,EAAmB,GAEmB,WAArCH,EAAoBI,eACiB,eAArCJ,EAAoBI,eACiB,MAArCJ,EAAoBI,eACiB,KAArCJ,EAAoBI,gBAErBJ,EAAsB,eACtBG,GAAoB,GAElBA,GAAoB,GACtBd,EAAoB5C,KAAKuD,EAAsB,aAAeE,EAAWC,GAAoB,SAE/F,IAAIzF,EAAOoF,EAAkB,IAAME,EAAsB,IAAMC,EAAkB,QACjFvF,GAAQoF,kBAA0CH,EAAa,SAC/DjF,GAAQuF,kBAA0CL,EAAa,SAC/DT,EAAWG,GAAK5E,EAChBoC,QAAQC,IAAIrC,GACZoC,QAAQC,IAAI,4BAKdoC,EAAavH,KAAKyI,UAAUlB,EAAWmB,QACvCjB,EAAsBzH,KAAKyI,UAAUhB,EAAoBiB,QAEzD,IAAK,IAAI9I,EAAI,EAAGA,EAAI2H,EAAWrH,OAAQN,IACnB2H,EAAW3H,GAI/B,IAAK,IAAI+I,EAAI,EAAGA,EAAIlB,EAAoBvH,OAAQyI,IAC5BlB,EAAoBkB,IAW1CF,UAvgBO,SAugBGG,GAKR,IAJA,IAAIC,EAAO,GACPC,EAAM,GACN7I,EAAM2I,EAAE1I,OACR6I,EAAI,EACArB,EAAI,EAAGA,EAAIzH,EAAKyH,IAAK,CAC3B,IAAIsB,EAAOJ,EAAElB,GACK,IAAfmB,EAAKG,KACNH,EAAKG,GAAQ,EACbF,EAAIC,KAAOC,GAGf,OAAOF,GAGTX,SAthBO,SAshBEpC,EAASkD,GAEhB/D,QAAQC,IAAIY,EAAQI,KAAKrD,KAAKZ,MAAMkE,IAAI6C,IACxC/D,QAAQC,IAAI,aAAc8D,GAG1B,IAAIC,EAAQ,CACZA,KAAa,OAYb,OAX6B,IAAzBD,EAAOhE,QAAQ,OACjBiE,EAAM7F,KAAO,WAUR4F,GAET/B,eA3iBO,WA6iBL,IAAIiC,EAAY1C,SAASC,eAAgB,aAAc0C,WAAW,GAAGC,OACrEnE,QAAQC,IAAIgE,GACZ,IAAKG,EAAoB7C,SAAS8C,cAAc,UAChDD,EAAkBE,MAAQL,EAAUK,MACpCF,EAAkBG,OAASN,EAAUM,OAErC,IAAKC,EAAUJ,EAAkBK,WAAW,MAG5CD,EAAQE,UAAY,UACpBF,EAAQG,SAAS,EAAE,EAAEV,EAAUK,MAAML,EAAUM,QAG/CC,EAAQI,UAAUX,EAAW,EAAG,GAIhC,IAAIY,EAAUT,EAAkBU,YAG5BC,EAAUxD,SAAS8C,cAAe,KACtCU,EAAQC,SAAW,YACnBD,EAAQE,KAAOJ,EAGftD,SAASN,KAAKiE,YAAaH,GAC3BA,EAAQI,QACR5D,SAASN,KAAKmE,YAAaL,IAE7B3G,OA1kBO,SA0kBAiH,GACL,OAAOA,EAASlG,MAAM,KAAKW,MAAMC,QAAQ,MAAQ,GAGnD7B,WA9kBO,SA8kBI6F,GACT,IAEE,OADA,IAAIuB,IAAIvB,IACD,EACP,MAAOwB,GACP,OAAO,IAGXC,YAtlBO,SAslBKC,GAEV,OADAzF,QAAQC,IAAIwF,GACLA,EAAGtH,MACR,IAAK,WAGL,MACA,IAAK,UAEL,MACA,IAAK,MAEL,IAAIuH,EAASD,EACbC,EAAOC,OAASF,EAAGrJ,MACnB4D,QAAQC,IAAI,iDAEZ,MACA,cCniBR,GACE2F,KAAM,gBACNC,WAAY,CACV,UAAa,WAAjB,wDACI,UAAa,WAAjB,wDACI,aAAgB,WAApB,yDAEEC,OAAQ,CAACC,EAAX,sBACEnI,KARF,WAQA,WACI,MAAO,CAELoI,KAAN,KACM/J,KAAM,CAAZ,oBACMsB,KAAM,GACNhB,SAAU,gBACVI,QAAS,eACTsJ,IAAK,GACLvI,QAAS,GACTF,SAAN,GACMR,MAAO,CACb,CAAQ,GAAR,EAAQ,MAAR,SAAQ,MAAR,UACA,CAAQ,GAAR,EAAQ,MAAR,UAAQ,MAAR,WACA,CAAQ,GAAR,EAAQ,MAAR,WAAQ,MAAR,YACA,CAAQ,GAAR,EAAQ,MAAR,MAAQ,MAAR,OACA,CAAQ,GAAR,EAAQ,MAAR,UAAQ,MAAR,WACA,CAAQ,GAAR,EAAQ,MAAR,MAAQ,MAAR,OACA,CAAQ,GAAR,EAAQ,MAAR,SAAQ,MAAR,UACA,CAAQ,GAAR,EAAQ,MAAR,WAAQ,MAAR,aAEMC,MAAO,CACb,CAAQ,KAAR,EAAQ,GAAR,GACA,CAAQ,KAAR,EAAQ,GAAR,GACA,CAAQ,KAAR,EAAQ,GAAR,GACA,CAAQ,KAAR,EAAQ,GAAR,GACA,CAAQ,KAAR,EAAQ,GAAR,GACA,CAAQ,KAAR,EAAQ,GAAR,GACA,CAAQ,KAAR,EAAQ,GAAR,IAEMC,QAAS,CAKPD,MAAR,CACUiJ,OAAQ,KAKRC,QAAV,CACYjK,OAAO,GAETkK,QAAQ,GAEVC,YAAa,CACXC,mBAAmB,GAGrBC,aAAc,CACZC,SAAS,EACTC,iBAAiB,EACjBC,QAAS,WAAnB,+IACA,eADA,mGAAmB,GAGTC,SAAU,WAApB,+IACA,gBADA,mGAAoB,GAGVC,QAAS,WAAnB,+IACA,eADA,mGAAmB,GAGTC,SAAU,WAApB,+IACA,gBADA,mGAAoB,OAQlBC,QA9EF,WA+EIhM,KAAKiM,OAASjM,KAAKkM,OAAOC,MAAMC,MAAMH,OAEtCjM,KAAKqM,UAKPrJ,QAAS,CACPX,WADJ,SACA,GAGM,IACErC,KAAKgB,KAAO,GACZhB,KAAKgB,KAAKC,IAAMqG,EAAEpF,MAAM,GACxBlC,KAAKqM,SACb,SACQnH,QAAQC,IAAImC,KAGhBhF,WAZJ,SAYA,GAEM4C,QAAQC,IAAImC,EAAEnF,MAAM,KAEtBQ,YAhBJ,SAgBA,GAEM,IAAN,uBAEM3C,KAAK0K,YAAYvH,GACjBnD,KAAK0C,SAAWS,EAAYT,UAI9BkJ,QAzBJ,SAyBA,KAE2B,MAAjB5L,KAAKsM,WACPtM,KAAKgB,KAAOhB,KAAKsM,UAEnBnL,EAAK0E,GAAK7F,KAAKgB,KAAKC,IAA1B,SACME,EAAKC,MAAQ,GAEbpB,KAAK6L,SAAS1K,EAAMI,IAEtBsK,SAnCJ,SAmCA,GAEM7L,KAAKmB,KAAOiG,EACZpH,KAAKuM,SAASC,KAAK,eAErBV,QAxCJ,SAwCA,KAGM,GADA9L,KAAKyC,KAAO6E,EACRA,EAAEzH,MAAQyH,EAAExH,GAAI,CAClB,IAAI2M,EAAIC,QAAQ,8CAChB,GAAS,GAALD,EAEF,YADAE,EAAG,MAIP3M,KAAK4M,oBAAoBtF,EAAGqF,IAE9BZ,SApDJ,SAoDA,KAEM/L,KAAK4M,oBAAoBtF,EAAGqF,IAE9BC,oBAxDJ,SAwDA,KASM5M,KAAKyC,KAAOA,EACZzC,KAAKuM,SAASC,KAAK,cAEnBjL,KAGFgB,SAvEJ,SAuEA,GAEM,IAAIsK,EAAQ7M,KAAKkC,MAAM4K,KAAI,SAAjC,GACQ,OAAOC,EAAElH,MACjB,cAEA,MACQ7F,KAAKkC,MAAM5C,OAAOuN,EAAO,GAEzB7M,KAAKkC,MAAM2K,GAAOzL,MAAQgG,EAAEhG,OAE5BpB,KAAKkC,MAAM2C,KAAKuC,IAGpB5E,SArFJ,SAqFA,GACM,IAAIqK,EAAQ7M,KAAKmC,MAAM2K,KAAI,SAAjC,GACQ,OAAOC,EAAElH,MACjB,cAEA,KAEQ7F,KAAKmC,MAAM0K,GAAOzL,MAAQkG,EAAElG,OAE5BpB,KAAKmC,MAAM0C,KAAKyC,GAChBtH,KAAKgG,gBAAgBsB,KAIzB,gBAnGJ,SAmGA,wLACA,mBACA,mBAGA,8BACA,uBAEA,8BACA,qBAOA,6DACA,6DAGA,WACA,kBArBA,SAsBA,2BAtBA,OAsBA,EAtBA,OAwBA,+BACA,qCAEA,+BAEA,+BAGA,yCAEA,+BACA,qCACA,SApCA,+CAsCI0F,aAzIJ,SAyIA,KACM9H,QAAQC,IAAI8H,EAAlB,IAEIlL,KA5IJ,WA6IM,IAAN,uEACA,OAIMmL,UAAUC,UAAUC,UAAUC,GAAUC,MAAK,WAG3CC,EAAIC,UAAU,mCAAoCH,EAA1D,uDACA,WAGQE,EAAIC,UAAU,sDAAuDH,EAAU,eAKnF,OA9JJ,WA8JA,uLACA,UAKA,cACA,2CAEA,yEACA,4CAEA,wDACA,yBAEA,KAEA,KAjBA,mBAmBA,+BAnBA,QAmBA,EAnBA,OAoBA,KApBA,sEAsBA,+BAtBA,QAsBA,EAtBA,OAuBA,KAvBA,eA2BA,WACA,kBAGA,oCAEA,MACA,mBACA,4BACA,8BACA,gFAIA,+BAIA,+BA7CA,UAgDA,SAhDA,WAmDA,0BAnDA,kCAsDA,+BAtDA,WAsDA,EAtDA,OA2DA,kBA3DA,oBA4DA,kBA5DA,uBA6DA,UACA,uFA9DA,WAkEA,kBAlEA,uBAmEA,UACA,+FApEA,QA2EA,oBA3EA,wBA8EA,oBA9EA,eAwFA,mBACA,QACA,yCA1FA,UA8FA,oBA9FA,eA+FA,iBACA,EACA,yCAjGA,UAwGA,oBAxGA,QA2GA,mBA3GA,6DA6GA,eA3QA,WA8QA,+BACA,4DACA,gCAEA,eACA,2CACA,cACA,WACA,QACA,yBACA,sBACA,iBAGMrN,KAAKyN,gBAIP3L,MAhSJ,WAiSM9B,KAAKkC,MAAQ,GACblC,KAAKmC,MAAQ,IAEfH,YApSJ,WAqSMhC,KAAKuM,SAASC,KAAK,kBAErB,OAvSJ,WAuSA,mKACA,aAEA,wBACA,gBACA,2BACA,0EANA,iCAQA,2BARA,OAQA,EARA,OAUA,yBAVA,wBAeA,oBACA,+BAEA,mBAlBA,+CAwBIkB,WA/TJ,SA+TA,GAGM,IAAInH,EAAQvG,KAAK2N,SAASC,EAAEvI,QAAQQ,IAC1C,8BAE4B,8CAAlB+H,EAAEtI,UAAUO,KAEdzE,EAAQwM,EAAErI,OAAOM,IAGnB,IAAN,8FAGMJ,EAAN,yBAEM,IAAIoI,EAAS7N,KAAK2N,SAASC,EAAErI,OAAOM,IAC1C,6BAKA,4FAGM7F,KAAK8N,iBAAiBlI,GAEtB,IAAN,gCACA,8BACM5F,KAAKmC,MAAM0C,KAAKkJ,KAetBC,MAAA,CACA,KADA,WAGA,gBAWAC,SAAA,CACA,QACA,sDACA,kBAEA,aACA,mFACA,kBAEA,SACA,uDACA,kBAEA,OACA,qDACA,kBAEA,SACA,uDACA,kBAEA,MACA,oDACA,iECjjBsW,I,wBCQlWC,EAAY,eACd,EACA3N,EACAsC,GACA,EACA,KACA,KACA,MAIa,aAAAqL,E,kEClBf,IAAIlQ,EAAI,EAAQ,QACZmQ,EAAO,EAAQ,QAAgCrB,IAC/CvO,EAA+B,EAAQ,QACvCC,EAA0B,EAAQ,QAElCC,EAAsBF,EAA6B,OAEnDG,EAAiBF,EAAwB,OAK7CR,EAAE,CAAEmB,OAAQ,QAASC,OAAO,EAAMC,QAASZ,IAAwBC,GAAkB,CACnFoO,IAAK,SAAasB,GAChB,OAAOD,EAAKnO,KAAMoO,EAAY/N,UAAUH,OAAS,EAAIG,UAAU,QAAKgO","file":"js/chunk-c700d8e0.1c2af0ca.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=style&index=0&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modele-view\"},[_vm._v(\" Reprendre network3 \"),_c('small',[_vm._v(\" File: \"),_c('a',{attrs:{\"href\":_vm.file.url,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.file.url))]),_c('br'),_vm._v(\" Node: \"+_vm._s(_vm.node.label)),_c('br')]),_c('b-input',{attrs:{\"placeholder\":\"filename without spaces or any exotic char\"},model:{value:(_vm.filename),callback:function ($$v) {_vm.filename=$$v},expression:\"filename\"}}),_c('b-button',{on:{\"click\":_vm.create}},[_vm._v(\"New\")]),_c('b-form-checkbox',{staticClass:\"m-2\",attrs:{\"id\":\"checkbox-1\",\"name\":\"checkbox-1\",\"value\":\"public_write\",\"unchecked-value\":\"private_write\",\"checked\":\"\"},model:{value:(_vm.privacy),callback:function ($$v) {_vm.privacy=$$v},expression:\"privacy\"}},[_vm._v(\" Anyone can amend this file \")]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"warning\"},on:{\"click\":_vm.clear}},[_vm._v(\"Clear\")]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"success\"},on:{\"click\":_vm.copy}},[_vm._v(\"Copy\")]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"success\"},on:{\"click\":_vm.openCommand}},[_vm._v(\"Command\")]),_c('network',{ref:\"network\",staticClass:\"wrapper\",attrs:{\"nodes\":_vm.nodes,\"edges\":_vm.edges,\"options\":_vm.options},on:{\"select-node\":_vm.selectNode,\"select-edge\":_vm.selectEdge}}),_c('NodeModal',{on:{\"ok\":_vm.saveNode},model:{value:(_vm.node),callback:function ($$v) {_vm.node=$$v},expression:\"node\"}}),_c('EdgeModal',{on:{\"ok\":_vm.saveEdge},model:{value:(_vm.edge),callback:function ($$v) {_vm.edge=$$v},expression:\"edge\"}}),_c('CommandModal',{attrs:{\"inputNew\":_vm.inputNew},on:{\"ok\":_vm.saveCommand},model:{value:(_vm.command),callback:function ($$v) {_vm.command=$$v},expression:\"command\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nexport default {\r\n  data() {\r\n    return {\r\n      commandHistory: []\r\n    }\r\n  },\r\n  methods: {\r\n    getInputType(iv){\r\n      var inputObject = {};\r\n\r\n      // si commence par http --> type = url\r\n      if (this.isValidUrl(iv)){\r\n        inputObject.type = \"url\";\r\n        inputObject.value = iv;\r\n        inputObject.isFile = this.isFile(iv)\r\n      }else{\r\n        // selon le premier charactère, on detecte une commande\r\n        let firstChar = iv.charAt(0);\r\n        let last = \"\"\r\n        switch(firstChar){\r\n          case '/':\r\n          //    let commande = rdf.quad(rdf.blankNode(), rdf.namedNode('commande'),rdf.literal(message))\r\n          //  this.catchCommande(message,this.network,this);\r\n\r\n          inputObject.type = \"commande\";\r\n          inputObject.value = iv;\r\n          inputObject.inputNew = \"\";\r\n          this.catchCommande(inputObject)\r\n          break;\r\n\r\n          case '.':\r\n          last = this.commandHistory[this.commandHistory.length-1];\r\n          inputObject.inputNew = last.s+\" \"+last.p+\" \"+last.o;\r\n          break;\r\n\r\n          case ';':\r\n          last = this.commandHistory[this.commandHistory.length-1];\r\n          inputObject.inputNew = last.s+\" \"+last.p+\" \";\r\n          break;\r\n\r\n          case ',':\r\n          last = this.commandHistory[this.commandHistory.length-1];\r\n          inputObject.inputNew = last.s+\" \";\r\n          break;\r\n\r\n\r\n          default:\r\n          // si le premier charactère n'indique pas une commande, on traite comme un triplet\r\n          inputObject = this.traiteTriplet(iv);\r\n          this.catchTriplet(inputObject)\r\n          //  console.log(\"TODO is catchTriplet Necessaire ici ?\")\r\n        }\r\n      }\r\n\r\n      //si termine par virgule, point, point-virgule, tiret --> triplet\r\n\r\n      return inputObject;\r\n    },\r\n    traiteTriplet(message){\r\n      var result = {}\r\n      var inputNew = \"\";\r\n      let lastChar = message.slice(-1);\r\n      let messageCut = message.slice(0,-1).split(\" \");\r\n      let isTriplet = true;\r\n      //  console.log(messageCut);\r\n\r\n      let detectLiteral = \"\";\r\n      let messageCutTemp = [];\r\n      messageCut.forEach(function(part){\r\n        part = part.trim();\r\n        //  console.log(part);\r\n        if (part.startsWith('\"')){\r\n          detectLiteral =\"debut\";\r\n          //  console.log(detectLiteral);\r\n          messageCutTemp.push(part.substr(1));\r\n        }else if (part.endsWith('\"')){\r\n          detectLiteral = \"fin\";\r\n          //console.log(detectLiteral);\r\n          messageCutTemp.push(messageCutTemp.pop()+\" \"+part.slice(0,-1));\r\n        }else if (detectLiteral == \"debut\"){\r\n          //  console.log(\"recupere le dernier et lui ajoute part\" )\r\n          messageCutTemp.push(messageCutTemp.pop()+\" \"+part)\r\n        }else {\r\n          messageCutTemp.push(part);\r\n        }\r\n      });\r\n      if (messageCutTemp.length > 0){\r\n        messageCut = messageCutTemp;\r\n      }\r\n      switch(lastChar){\r\n        case '.':\r\n        inputNew = \"\";\r\n        break;\r\n        case ';':\r\n        if (messageCut[0].indexOf(\" \") > -1){\r\n          inputNew = '\"'+messageCut[0]+'\"'+' ';\r\n        }else{\r\n          inputNew = messageCut[0]+' ';\r\n        }\r\n        break;\r\n        case ',':\r\n        if (messageCut[0].indexOf(\" \") > -1){\r\n          inputNew = '\"'+messageCut[0]+'\" ';\r\n        }else{\r\n          inputNew = messageCut[0]+' ';\r\n        }\r\n        if (messageCut[1].indexOf(\" \") > -1){\r\n          inputNew += '\"'+messageCut[1]+'\" ';\r\n        }else{\r\n          inputNew += messageCut[1]+' ';\r\n        }\r\n        break;\r\n        case '-':\r\n        if (messageCut[2].indexOf(\" \") > -1){\r\n          inputNew = '\"'+messageCut[2]+'\"'+' ';\r\n        }else{\r\n          inputNew = messageCut[2]+' ';\r\n        }\r\n        break;\r\n        default:\r\n        console.log(\"message to chat \"+message)\r\n        //this.sendMessage(message);\r\n        //  this.agentInput.send('agentSocket', {type: \"sendMessage\", message:message});\r\n        //  this.catchTriplet(message.slice(0,-1), this.network); // A REMPLACER PAR CATCHTRIPLETS V2\r\n        inputNew = \"\";\r\n        isTriplet = false;\r\n      }\r\n      if (isTriplet){\r\n        //  console.log(\"est Triplet\",messageCut)\r\n        result.type = \"triplet\";\r\n        var tripletvalue = {};\r\n        tripletvalue.subject = messageCut[0];\r\n        tripletvalue.predicate = messageCut[1];\r\n        tripletvalue.object = messageCut[2];\r\n        result.value = tripletvalue;\r\n        result.inputNew = inputNew;\r\n      }else {\r\n        //  console.log(\"n'est pas triplet\")\r\n        result.type = \"message\";\r\n        result.value = message;\r\n        result.inputNew = inputNew;\r\n      }\r\n\r\n      return result;\r\n    },\r\n\r\n    catchTriplet(triplet){\r\n      var subject = triplet.value.subject;\r\n      var predicate = triplet.value.predicate;\r\n      var object = triplet.value.object;\r\n\r\n      let subjectNode  = this.nodes.filter(function(el) {\r\n        return el.label == subject\r\n      });\r\n      let objectNode  = this.nodes.filter(function(el) {\r\n        return el.label == object\r\n      });\r\n      console.log(predicate, subjectNode, objectNode)\r\n      if(subjectNode.length == 0 ){\r\n        subjectNode = {id:this.file.url+\"#\"+subject , label:subject}\r\n        // let res =\r\n        //  this.$refs.network.nodes.add(subjectNode)\r\n        this.nodes.push(subjectNode)\r\n        //  console.log(this.nodes[res])\r\n        //  subjectNode = this.$refs.network.body.data.nodes.add(subjectNode)\r\n\r\n      }\r\n      if (  objectNode.length == 0){\r\n        objectNode = {id:this.file.url+\"#\"+object, label: object}\r\n        // let res =\r\n        this.nodes.push(objectNode)\r\n      //  this.$refs.network.nodes.add(objectNode)\r\n\r\n        //  console.log(this.nodes[res])\r\n        //  objectNode = this.$refs.network.body.data.nodes.add(objectNode)\r\n      }\r\n      console.log(this.$refs.network.nodes)\r\n      subjectNode  = this.$refs.network.nodes.filter(function(el) {\r\n        return el.label == subject\r\n      });\r\n      objectNode  = this.$refs.network.nodes.filter(function(el) {\r\n        return el.label == object\r\n      });\r\n      subjectNode = subjectNode[0]\r\n      objectNode = objectNode[0]\r\n      console.log(subjectNode, objectNode)\r\n      let   edge = {from: subjectNode.id, to:objectNode.id, label: predicate}\r\n      this.edges.push(edge)\r\n      console.log(edge)\r\n      this.writeEdgeToFile(edge)\r\n\r\n\r\n      // let edge = this.edges.filter(function(e) {\r\n      //   return (e.from == subjectNode.id && e.to == objectNode.id && e.label == predicate);\r\n      // })\r\n      // console.log(edge)\r\n      // if (edge.length == 0){\r\n      //   edge = {from: subjectNode.id, to:objectNode.id, label: predicate}\r\n      //   this.edges.push(edge)\r\n      //   console.log(edge)\r\n      //   this.writeEdgeToFile(edge)\r\n      // }\r\n\r\n\r\n\r\n\r\n    },\r\n\r\n\r\n    catchTriplet1(triplet){\r\n      //  console.log(triplet)\r\n      var subject = triplet.value.subject;\r\n      var predicate = triplet.value.predicate;\r\n      var object = triplet.value.object;\r\n      // console.log(message.length);\r\n      //message=message.trim();\r\n      //var tripletString = message.substring(2).trim().split(\" \");\r\n      // les noeuds existent-ils ?\r\n      var sujetNode = this.network.body.data.nodes.get({\r\n        filter: function(node){\r\n          //    console.log(node);\r\n          return (node.label == subject );\r\n        }\r\n      });\r\n      var objetNode = this.network.body.data.nodes.get({\r\n        filter: function(node){\r\n          //    console.log(node);\r\n          return (node.label == object);\r\n        }\r\n      });\r\n      //  console.log(sujetNode);\r\n      //  console.log(objetNode);\r\n      // sinon, on les créé\r\n      if (sujetNode.length == 0){\r\n        var sub_n = {label: subject, color:{\r\n          border : document.getElementById(\"bordercolorpicker\").value ,\r\n          background : document.getElementById(\"bodycolorpicker\").value }\r\n        };\r\n        this.network.body.data.nodes.add(sub_n);\r\n      }\r\n      if (objetNode.length == 0){\r\n        var obj_n = {label: object, color:{\r\n          border : document.getElementById(\"bordercolorpicker\").value ,\r\n          background : document.getElementById(\"bodycolorpicker\").value }\r\n        };\r\n        this.network.body.data.nodes.add(obj_n);\r\n      }\r\n      // maintenant ils doivent exister, pas très po=ropre comme méthode , à revoir\r\n      sujetNode = this.network.body.data.nodes.get({\r\n        filter: function(node){\r\n          return (node.label == subject );\r\n        }\r\n      });\r\n      objetNode = this.network.body.data.nodes.get({\r\n        filter: function(node){\r\n          //  console.log(node);\r\n          return (node.label == object);\r\n        }\r\n      });\r\n      this.network.body.data.edges.add({\r\n        label: predicate,\r\n        from : sujetNode[0].id,\r\n        to : objetNode[0].id,\r\n        color: {inherit:'both'}\r\n\r\n      });\r\n      //on récupère ce edge pour l'envoyer au serveur\r\n      var edge = this.network.body.data.edges.get({\r\n        filter: function(edge) {\r\n          return (edge.from == sujetNode[0].id && edge.to == objetNode[0].id && edge.label == predicate);\r\n        }\r\n      });\r\n      console.log(\"EDGE is necessaire ici ?\",edge)\r\n      //  console.log(\"OK\",autofit,autofocus)\r\n      //this.network.fit();\r\n      //  fitAndFocus(sujetNode[0].id);\r\n\r\n    },\r\n\r\n\r\n\r\n    catchCommande(commande){\r\n      console.log(commande)\r\n      switch(commande.value) {\r\n        case \"/h\":\r\n        case \"/help\":\r\n        case \"/aide\":\r\n        //console.log(this.$.dialogs)\r\n        console.log(\"help\")\r\n        //  this.$.dialogs.$.helpPopUp.toggle();\r\n        //  this.agentInput.send('agentDialogs', {type:'toggle', popup: 'helpPopUp'})\r\n        break;\r\n        case \"/e\":\r\n        case \"/export\":\r\n        case \"/exportJson\":\r\n        console.log(\"exportjson\")\r\n        //  this.exportJson(this.network)\r\n        //this.exportJson();\r\n        //  this.agentInput.send('agentGraph', {type: 'exportJson'})\r\n        //this.agentInput.send(\"agentVis\", {type: 'exportJson'});\r\n        break;\r\n        case \"/t\":\r\n        console.log(\"exportTtl\")\r\n        //  this.exportTtl(this.network)\r\n        //  this.exportTtl(this.network,this);\r\n        //  this.agentInput.send('agentGraph', {type:'exportTtl'}); // , what: 'network', to: 'agentDialogs', where: 'inputTextToSave'\r\n        //    this.agentInput.send('agentDialogs', {type:'toggle', popup: 'popupTtl'})\r\n        //  this.agentInput.send(\"agentVis\", {type: 'exportTtl'});\r\n        break;\r\n        case \"/i\":\r\n        case \"/import\":\r\n        case \"/importJson\":\r\n        console.log(\"import\");\r\n        document.getElementById('import-popUp').style.display = 'block';\r\n        break;\r\n        case \"/p\":\r\n        console.log(\"save_to_pod\");\r\n        document.getElementById('select-pod-popUp').style.display = 'block';\r\n        break;\r\n        case \"/a\":\r\n        console.log(\"open editor\");\r\n        document.getElementById('editeur-popUp').style.display = 'block';\r\n        /*  const editorDialog = new mdc.dialog.MDCDialog(document.getElementById('editor_dialog'));\r\n        editorDialog.open();*/\r\n        //  document.getElementById('select-pod-popUp').style.display = 'block';\r\n        break;\r\n        case \"/r\":\r\n        console.log(\"reglages editor\");\r\n        // const reglagesDialog = new mdc.dialog.MDCDialog(document.getElementById('reglages_dialog'));\r\n        // reglagesDialog.open();\r\n        //  document.getElementById('select-pod-popUp').style.display = 'block';\r\n        break;\r\n        case \"/n\":\r\n        console.log(\"new graph\");\r\n        //  newGraph();\r\n        this.clear()\r\n        //  level < 6? increaseLevel() : \"\";\r\n        break;\r\n        case \"/l\":\r\n        console.log(\"connection a la base levelgraph\");\r\n        break;\r\n        case \"/c\":\r\n        //  console.log(\"capture_graphe\");\r\n        this.downloadCanvas()\r\n        break;\r\n        default:\r\n        console.log(\"non traite\"+ commande);\r\n        //  return afficheCommandes();\r\n      }\r\n    },\r\n    //###############################################################################\r\n    //Sous cette ligne, review de code a faire\r\n    //###############################################################################\r\n\r\n\r\n    // exportJson(network) {\r\n    //\r\n    //   var nodes_edges = { nodes: network.body.data.nodes.get(), edges: network.body.data.edges.get() };\r\n    //   //  console.log(nodes_edges);\r\n    //   var nodes_edgesJSON = JSON.stringify(nodes_edges);\r\n    //   updateEditorFromNetwork(nodes_edgesJSON)\r\n    //\r\n    // },\r\n    exportTtl(network) {\r\n      /* source https://github.com/scenaristeur/dreamcatcherAutonome/blob/master/autonome/public/agents/ExportAgent.js */\r\n      //  let network = this.network;\r\n      //  var nodes = network.body.data.nodes.get();\r\n      //var edges = network.body.data.edges.get();\r\n      // on ne prend pas le cluster cid=1 correspondant à la navigation pour l'export\r\n      var nodes = network.body.data.nodes.get({\r\n        filter: function (n) {\r\n          return (n.cid != 1);\r\n        }\r\n      });\r\n      var edges = network.body.data.edges.get({\r\n        filter: function (e) {\r\n          return (e.cid != 1);\r\n        }\r\n      });\r\n      console.log(\"exportation\");\r\n      console.log(nodes);\r\n      console.log(edges);\r\n      //creation des statements (triplets)\r\n      /*var statements = [];\r\n      for (var j = 0; j < edges.length; j++){\r\n      var edge = edges[j];\r\n      console.log(edge);\r\n      statements.push({sujet: node.id, propriete: \"rdfs:label\", objet: node.label});\r\n    }\r\n    console.log(statements);*/\r\n\r\n    var output = \"@prefix : <http://smag0.blogspot.fr/spoggy#> . \\n\";\r\n    output += \"@prefix owl: <http://www.w3.org/2002/07/owl#> . \\n\";\r\n    output += \"@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> . \\n\";\r\n    output += \"@prefix xml: <http://www.w3.org/XML/1998/namespace> . \\n\";\r\n    output += \"@prefix xsd: <http://www.w3.org/2001/XMLSchema#> . \\n\";\r\n    output += \"@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> . \\n\";\r\n    output += \"@prefix smag: <http://smag0.blogspot.fr/spoggy#> . \\n\";\r\n    output += \"@base <http://smag0.blogspot.fr/spoggy> . \\n\";\r\n    //output += \"<http://smag0.blogspot.fr/spoggy> rdf:type owl:Ontology ;  \\n\";\r\n    //output += \"                    owl:versionIRI <http://smag0.blogspot.fr/spoggy/1.0.0> . \\n\";\r\n    output += \" \\n\";\r\n    //output += \"owl:Class rdfs:subClassOf owl:Thing .  \\n\";\r\n\r\n    var listeInfos = new Array();\r\n    var listeComplementaire = new Array();\r\n\r\n    for (var i = 0; i < edges.length; i++) {\r\n      var edge = edges[i];\r\n\r\n      var sujet = edge.from;\r\n      var propriete = edge.label.replace(/\\s/g, \"_\");\r\n      var objet = edge.to;\r\n\r\n\r\n      //string.indexOf(substring) > -1\r\n      //console.log(sujet);\r\n      //console.log(propriete);\r\n      console.log(objet);\r\n\r\n      // AJOUTER EVENTUELLEMENT LA RECUPERATION DE SHAPE, COLOR, pour l'export RDF\r\n      var sujetLabel = network.body.data.nodes.get(sujet).label.replace(/\\n/g, \"\");\r\n      try{\r\n        var objetLabel = network.body.data.nodes.get(objet).label.replace(/\\n/g, \"\");\r\n      }catch(error)\r\n      {\r\n        console.error(\"ERREUR NONTRAITEE\")\r\n        console.error(error)\r\n\r\n      }\r\n\r\n      //console.log(\"#########################\");\r\n      //console.log(sujetLabel);\r\n      //console.log(objetLabel)\r\n      //console.log(\"#########################\");\r\n\r\n      var sujetWithPrefix = this.validRdf(network, sujet);\r\n      var proprieteWithPrefix = this.validRdf(network, propriete);\r\n      var objetWithPrefix = this.validRdf(network, objet);\r\n\r\n      if (sujetWithPrefix.indexOf(':') == -1) { // ne contient pas de ':'\r\n        sujetWithPrefix = '_:' + sujetWithPrefix; // blanknode\r\n      }\r\n\r\n      if (proprieteWithPrefix.indexOf(':') == -1) { // ne contient pas de ':'\r\n        proprieteWithPrefix = ':' + proprieteWithPrefix; // propriete utilisant \"@base <http://smag0.blogspot.fr/spoggy>\"\r\n\r\n      }\r\n\r\n      if (objetWithPrefix.indexOf(':') == -1) { // ne contient pas de ':'\r\n        objetWithPrefix = '_:' + objetWithPrefix;  // blanknode\r\n      }\r\n\r\n\r\n      var typedeProp = [\"owl:AnnotationProperty\", \"owl:ObjectProperty\", \"owl:DatatypeProperty\"];\r\n      var indiceTypeDeProp = 1; // -1 pour ne pas ajouter la prop, sinon par defaut en annotationProperty, 1 pour Object, 2 pour Datatype --> revoir pour les datatypes\r\n\r\n      if (\r\n        (proprieteWithPrefix == \"type\") ||\r\n        (proprieteWithPrefix == \":type\") ||\r\n        (proprieteWithPrefix == \"rdf:type\") ||\r\n        (proprieteWithPrefix == \":a\") ||\r\n        (proprieteWithPrefix == \":est_un\") ||\r\n        (proprieteWithPrefix == \":est_une\") ||\r\n        (proprieteWithPrefix == \":is_a\")\r\n      ) {\r\n        proprieteWithPrefix = \"rdf:type\";\r\n        listeComplementaire.push(objetWithPrefix + \" rdf:type owl:Class . \\n\");\r\n        indiceTypeDeProp = 1;\r\n      } else if ((proprieteWithPrefix == \"subClassOf\") || (proprieteWithPrefix == \":subClassOf\") || (proprieteWithPrefix == \"rdfs:subClassOf\")) {\r\n        proprieteWithPrefix = \"rdfs:subClassOf\";\r\n      }\r\n      else if ((proprieteWithPrefix == \"sameAs\") || (proprieteWithPrefix == \":sameAs\")) {\r\n        proprieteWithPrefix = \"owl:sameAs\";\r\n        indiceTypeDeProp = -1;\r\n      }\r\n      else if (\r\n        (proprieteWithPrefix.toLowerCase() == \"ispartof\") ||\r\n        (proprieteWithPrefix.toLowerCase() == \"partof\") ||\r\n        (proprieteWithPrefix.toLowerCase() == \":partof\") ||\r\n        (proprieteWithPrefix.toLowerCase() == \":ispartof\")) {\r\n          proprieteWithPrefix = \"smag:partOf\";\r\n          indiceTypeDeProp = 1;\r\n        } else if (\r\n          (proprieteWithPrefix.toLowerCase() == \"comment\") ||\r\n          (proprieteWithPrefix.toLowerCase() == \"commentaire\") ||\r\n          (proprieteWithPrefix.toLowerCase() == \"//\") ||\r\n          (proprieteWithPrefix.toLowerCase() == \"#\")\r\n        ) {\r\n          proprieteWithPrefix = \"rdfs:comment\";\r\n          indiceTypeDeProp = -1;\r\n        }\r\n        if (indiceTypeDeProp >= 0) {\r\n          listeComplementaire.push(proprieteWithPrefix + \" rdf:type \" + typedeProp[indiceTypeDeProp] + \" . \\n\");\r\n        }\r\n        var data = sujetWithPrefix + \" \" + proprieteWithPrefix + \" \" + objetWithPrefix + \" . \\n\";\r\n        data += sujetWithPrefix + \" \" + \"rdfs:label \\\"\" + sujetLabel + \"\\\" . \\n\";\r\n        data += objetWithPrefix + \" \" + \"rdfs:label \\\"\" + objetLabel + \"\\\" . \\n\";\r\n        listeInfos[i] = data;\r\n        console.log(data);\r\n        console.log(\"||||||||||||||||||||||--\");\r\n      }\r\n      //console.log(listeInfos);\r\n      //console.log(listeComplementaire);\r\n      //suppression des doublons\r\n      listeInfos = this.uniq_fast(listeInfos.sort());\r\n      listeComplementaire = this.uniq_fast(listeComplementaire.sort());\r\n      // console.log (listeInfos);\r\n      for (var k = 0; k < listeInfos.length; k++) {\r\n        output = output + listeInfos[k];\r\n        //  console.log(output);\r\n      }\r\n\r\n      for (var l = 0; l < listeComplementaire.length; l++) {\r\n        output = output + listeComplementaire[l];\r\n        //  console.log(output);\r\n      }\r\n      //  updateEditorFromNetworkTtl(output)\r\n      //this.$.dialogs.$.inputTextToSave.value = output; //     document.getElementById(\"inputTextToSave\").value =output;\r\n      /*this.$.dialogs.$.popupTtl.fitInto = this.$.dialogs.$.menu;*/\r\n      //this.$.dialogs.$.popupTtl.toggle();\r\n      //console.log(output)\r\n\r\n      //this.agentGraph.send('agentDialogs', {type:'exportTtl', ttlData : output});\r\n    },\r\n    uniq_fast(a) {\r\n      var seen = {};\r\n      var out = [];\r\n      var len = a.length;\r\n      var j = 0;\r\n      for(var i = 0; i < len; i++) {\r\n        var item = a[i];\r\n        if(seen[item] !== 1) {\r\n          seen[item] = 1;\r\n          out[j++] = item;\r\n        }\r\n      }\r\n      return out;\r\n    },\r\n\r\n    validRdf(network, string){\r\n      // A REVOIR\r\n      console.log(network.body.data.nodes.get(string));\r\n      console.log(\"nettoyage \"+ string);\r\n      // transformer le noeud en noeud rdf (resource ou literal)\r\n      // ajouter la construction du noeud, son uri, prefix, localname, type...\r\n      var valid = {};\r\n      valid.type = \"uri\";\r\n      if (string.indexOf(\" \") !== -1){\r\n        valid.type = \"literal\";\r\n      }else{\r\n        /*\r\n        replaceAll(string, \" \",\"_\");\r\n        replaceAll(string, \"\",\"_\");\r\n        replaceAll(string, \",\",\"_\");\r\n        replaceAll(string, \";\",\"_\");\r\n        replaceAll(string, \" \",\"_\");*/\r\n      }\r\n\r\n      return string;\r\n    },\r\n    downloadCanvas(){\r\n      // get canvas data\r\n      var srcCanvas = document.getElementById( 'mynetwork' ).childNodes[0].canvas;\r\n      console.log(srcCanvas)\r\n      let  destinationCanvas = document.createElement(\"canvas\");\r\n      destinationCanvas.width = srcCanvas.width;\r\n      destinationCanvas.height = srcCanvas.height;\r\n\r\n      let  destCtx = destinationCanvas.getContext('2d');\r\n\r\n      //create a rectangle with the desired color\r\n      destCtx.fillStyle = \"#FFFFFF\";\r\n      destCtx.fillRect(0,0,srcCanvas.width,srcCanvas.height);\r\n\r\n      //draw the original canvas onto the destination canvas\r\n      destCtx.drawImage(srcCanvas, 0, 0);\r\n\r\n      //finally use the destinationCanvas.toDataURL() method to get the desired output;\r\n\r\n      var image =   destinationCanvas.toDataURL(); //canvas.toDataURL(\"image/png\");\r\n\r\n      // create temporary link\r\n      var tmpLink = document.createElement( 'a' );\r\n      tmpLink.download = 'image.png'; // set the name of the download file\r\n      tmpLink.href = image;\r\n\r\n      // temporarily add link to body and initiate the download\r\n      document.body.appendChild( tmpLink );\r\n      tmpLink.click();\r\n      document.body.removeChild( tmpLink );\r\n    },\r\n    isFile(pathname) {\r\n      return pathname.split('/').pop().indexOf('.') > -1;\r\n    },\r\n\r\n    isValidUrl(string){\r\n      try {\r\n        new URL(string);\r\n        return true;\r\n      } catch (_) {\r\n        return false;\r\n      }\r\n    },\r\n    traiteInput(io){\r\n      console.log(io)\r\n      switch(io.type) {\r\n        case \"commande\":\r\n        //this.catchCommande(message, this.network, this);\r\n        // code block\r\n        break;\r\n        case \"triplet\":\r\n        // code block\r\n        break;\r\n        case \"url\":\r\n        // code block\r\n        var params = io;\r\n        params.source = io.value;\r\n        console.log(\"IMPORTER, see spoggy-simple /js/import-export\")\r\n        //  importer(params,updateGraph)\r\n        break;\r\n        default:\r\n        // code block\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n","<template>\r\n  <div class=\"modele-view\">\r\n    Reprendre network3\r\n    <!--  <Component /> -->\r\n    <small>\r\n      File: <a :href=\"file.url\" target=\"_blank\">{{ file.url }}</a><br>\r\n      Node: {{node.label}}<br>\r\n    </small>\r\n\r\n    <!--  <b-button v-b-modal.node-popup>Launch demo modal</b-button>\r\n    <b-button v-b-modal.edge-popup>Launch demo modal</b-button>-->\r\n\r\n    <b-input placeholder=\"filename without spaces or any exotic char\" v-model=\"filename\" />\r\n    <b-button @click=\"create\">New</b-button>\r\n    <b-form-checkbox class=\"m-2\"\r\n    id=\"checkbox-1\"\r\n    v-model=\"privacy\"\r\n    name=\"checkbox-1\"\r\n    value=\"public_write\"\r\n    unchecked-value=\"private_write\"\r\n    checked> Anyone can amend this file\r\n  </b-form-checkbox>\r\n\r\n  <b-button @click=\"clear\" size=\"sm\" variant=\"warning\">Clear</b-button>\r\n  <b-button @click=\"copy\"  size=\"sm\" variant=\"success\">Copy</b-button>\r\n  <b-button @click=\"openCommand\" size=\"sm\" variant=\"success\">Command</b-button>\r\n\r\n  <network ref=\"network\"\r\n  class=\"wrapper\"\r\n  :nodes=\"nodes\"\r\n  :edges=\"edges\"\r\n  :options=\"options\"\r\n  @select-node=\"selectNode\"\r\n  @select-edge=\"selectEdge\">\r\n</network>\r\n<!-- @select=\"networkEvent('select')\" -->\r\n<!--  @nodes-mounted=\"networkEvent('nodes-mounted')\"\r\n@nodes-add=\"addNode\"\r\n@nodes-update=\"updateNode\"\r\n@nodes-remove=\"removeNode\"\r\n@edges-mounted=\"networkEvent('edges-mounted')\"\r\n@edges-add=\"addEdge\"\r\n@edges-update=\"updateEdge\"\r\n@edges-remove=\"removeEdge\"-->\r\n\r\n<NodeModal v-model=\"node\" @ok=\"saveNode\"/>\r\n<EdgeModal v-model=\"edge\" @ok=\"saveEdge\"/>\r\n<CommandModal v-model=\"command\" :inputNew=\"inputNew\" @ok=\"saveCommand\"/>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport \"vue-vis-network/node_modules/vis-network/dist/vis-network.css\";\r\n\r\nimport {  fetchDocument, createDocument } from 'tripledoc';\r\nimport { foaf, rdfs, dct, rdf } from 'rdf-namespaces'\r\nimport \"vue-vis-network/node_modules/vis-network/dist/vis-network.css\";\r\nimport {\r\n  getSolidDatasetWithAcl,\r\n  hasResourceAcl,\r\n  hasFallbackAcl,\r\n  hasAccessibleAcl,\r\n  //  createAcl,\r\n  createAclFromFallbackAcl,\r\n  getResourceAcl,\r\n  setPublicResourceAccess,\r\n  setAgentResourceAccess,\r\n  saveAclFor,\r\n} from \"@inrupt/solid-client\";\r\nimport networkMixin from '@/mixins/networkMixin'\r\nimport ActivityMixin from '@/mixins/ActivityMixin'\r\nimport ToastMixin from '@/mixins/ToastMixin'\r\nimport TripleMixin from '@/mixins/TripleMixin'\r\n\r\nexport default {\r\n  name: 'EditorNetwork',\r\n  components: {\r\n    'NodeModal': () => import('@/components/network/NodeModal'),\r\n    'EdgeModal': () => import('@/components/network/EdgeModal'),\r\n    'CommandModal': () => import('@/components/network/CommandModal'),\r\n  },\r\n  mixins: [networkMixin, ActivityMixin, ToastMixin, TripleMixin],\r\n  data() {\r\n    return {\r\n      //  file: {url:\"file_url\"},\r\n      self:this,\r\n      node: {label: \"node_label\"},\r\n      edge: {},\r\n      filename: \"new_graph.ttl\",\r\n      privacy: \"public_write\",\r\n      net: {},\r\n      command: \"\",\r\n      inputNew:\"\",\r\n      nodes: [\r\n        {id: 1,  label: 'circle',  shape: 'circle' },\r\n        {id: 2,  label: 'ellipse', shape: 'ellipse'},\r\n        {id: 3,  label: 'database',shape: 'database'},\r\n        {id: 4,  label: 'box',     shape: 'box'    },\r\n        {id: 5,  label: 'diamond', shape: 'diamond'},\r\n        {id: 6,  label: 'dot',     shape: 'dot'},\r\n        {id: 7,  label: 'square',  shape: 'square'},\r\n        {id: 8,  label: 'triangle',shape: 'triangle'},\r\n      ],\r\n      edges: [\r\n        {from: 1, to: 2},\r\n        {from: 2, to: 3},\r\n        {from: 2, to: 4},\r\n        {from: 2, to: 5},\r\n        {from: 5, to: 6},\r\n        {from: 5, to: 7},\r\n        {from: 6, to: 8}\r\n      ],\r\n      options: {\r\n        // locale: navigator.language,\r\n        // nodes: {\r\n        // //  borderWidth: 1\r\n        // },\r\n        edges:{\r\n          arrows: 'to',\r\n          //  color: 'red',\r\n          //  font: '12px arial #ff0000',\r\n          //  shadow: true,\r\n          //   font: '12px arial #ff0000',\r\n          scaling:{\r\n            label: true,\r\n          },\r\n          smooth: true,\r\n        },\r\n        interaction: {\r\n          navigationButtons: true,\r\n          //  keyboard: true\r\n        },\r\n        manipulation: {\r\n          enabled: true,\r\n          initiallyActive: true,\r\n          addNode: async (node, callback) => {\r\n            this.addNode(node, callback)\r\n          },\r\n          editNode: async (node, callback) => {\r\n            this.editNode(node, callback)\r\n          },\r\n          addEdge: async (node, callback) => {\r\n            this.addEdge(node, callback)\r\n          },\r\n          editEdge: async (node, callback) => {\r\n            this.editEdge(node, callback)\r\n          },\r\n\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created(){\r\n    this.folder = this.$store.state.solid.folder\r\n    //console.log(this.file.url)\r\n    this.update()\r\n    //  console.log(\"route\",this.$route)\r\n    //  this.url = this.$route.params.url\r\n    //  this.getData()\r\n  },\r\n  methods: {\r\n    selectNode(e){\r\n      //console.log(e)\r\n      //console.log(e.nodes[0])\r\n      try{\r\n        this.file = {}\r\n        this.file.url = e.nodes[0]\r\n        this.update()\r\n      }catch(e){\r\n        console.log(e)\r\n      }\r\n    },\r\n    selectEdge(e){\r\n      //console.log(e)\r\n      console.log(e.edges[0])\r\n    },\r\n    saveCommand(command){\r\n      //console.log(\"COMMAND\",command)\r\n      let inputObject = this.getInputType(command)\r\n      //console.log(\"inputObject\",inputObject);\r\n      this.traiteInput(inputObject);\r\n      this.inputNew = inputObject.inputNew\r\n      //console.log(this.inputNew)\r\n      //  this.updateInput(inputObject.inputNew)\r\n    },\r\n    addNode(node, callback){\r\n      //  callback() // Node will be added via reactivity from Vuex\r\n      if (this.tmp_file != null ){\r\n        this.file = this.tmp_file\r\n      }\r\n      node.id = this.file.url+\"#\"+node.id\r\n      node.label = \"\"\r\n      //console.log(node)\r\n      this.editNode(node, callback)\r\n    },\r\n    editNode(n/*,cb*/){\r\n      //console.log(\"EDIT NODE\",n,cb)\r\n      this.node = n\r\n      this.$bvModal.show(\"node-popup\")\r\n    },\r\n    addEdge(e,cb){\r\n      //console.log(\"add edge\",e,cb)\r\n      this.edge = e\r\n      if (e.from == e.to) {\r\n        var r = confirm(\"Do you want to connect the node to itself?\");\r\n        if (r != true) {\r\n          cb(null);\r\n          return;\r\n        }\r\n      }\r\n      this.editEdgeWithoutDrag(e, cb);\r\n    },\r\n    editEdge(e,cb){\r\n      //console.log(\"EDIT edge\",e,cb)\r\n      this.editEdgeWithoutDrag(e, cb);\r\n    },\r\n    editEdgeWithoutDrag(edge, callback){\r\n      //\r\n      //console.log(\"edit editWithoutDrag\",edge)\r\n      /*      // filling in the popup DOM elements\r\n      document.getElementById('edge-label').value = data.label;\r\n      document.getElementById('edge-saveButton').onclick = this.saveEdgeData.bind(this, data, callback);\r\n      document.getElementById('edge-cancelButton').onclick = this.cancelEdgeEdit.bind(this,callback);\r\n      document.getElementById('edge-popUp').style.display = 'block';\r\n      */\r\n      this.edge = edge\r\n      this.$bvModal.show(\"edge-popup\")\r\n      //console.log(edge, callback)\r\n      callback()\r\n    },\r\n\r\n    saveNode(n){\r\n      //console.log(\"saveNode\",n)\r\n      var index = this.nodes.map(x => {\r\n        return x.id;\r\n      }).indexOf(n.id);\r\n      //console.log(index)\r\n      if(index > -1){\r\n        this.nodes.splice(index, 1);\r\n        //console.log(  this.nodes[index])\r\n        this.nodes[index].label = n.label\r\n      }else{\r\n        this.nodes.push(n)\r\n      }\r\n    },\r\n    saveEdge(e){\r\n      var index = this.edges.map(x => {\r\n        return x.id;\r\n      }).indexOf(e.id);\r\n      //console.log(index)\r\n      if(index > -1){\r\n        //console.log(  this.edges[index])\r\n        this.edges[index].label = e.label\r\n      }else{\r\n        this.edges.push(e)\r\n        this.writeEdgeToFile(e)\r\n      }\r\n    },\r\n\r\n    async  writeEdgeToFile(e){\r\n      if (this.tmp_file != null){\r\n        this.file = this.tmp_file\r\n      }\r\n      //console.log(e)\r\n      let subject  = this.nodes.filter(function(el) {\r\n        return el.id == e.from\r\n      });\r\n      let object  = this.nodes.filter(function(el) {\r\n        return el.id == e.to\r\n      });\r\n      //console.log(subject[0], e, object[0])\r\n\r\n      //let identifier = subject[0].id.indexOf(this.file) > 0 ? subject[0].id.split('#') : subject[0].id\r\n\r\n\r\n      let subj_identifier = subject[0].id.includes(this.file.url) ? subject[0].id.split('#')[1] : subject[0].id\r\n      let obj_identifier = object[0].id.includes(this.file.url) ? object[0].id.split('#')[1] : object[0].id\r\n\r\n\r\n      var dateObj = new Date();\r\n      var date = dateObj.toISOString()\r\n      let doc =  await fetchDocument(this.file.url)\r\n      //console.log(doc)\r\n      let subj = doc.addSubject({identifier: subj_identifier})\r\n      subj.addString(rdfs.label, subject[0].label)\r\n\r\n      subj.addString(dct.modified, date)\r\n\r\n      subj.addRef(foaf.maker, this.webId)\r\n\r\n\r\n      subj.addRef(this.file.url+\"#\"+e.label, object[0].id)\r\n      //subj.addRef(this.file.url+\"#\"+e.label, obj_identifier)\r\n      let obj = doc.addSubject({identifier: obj_identifier})\r\n      obj.addString(rdfs.label, object[0].label)\r\n      doc.save()\r\n    },\r\n    networkEvent(eventName,e) {\r\n      console.log(eventName,e)\r\n    },\r\n    copy(){\r\n      let copyText = \"https://scenaristeur.github.io/solid-vue-panes/?url=\"+this.file.url //window.location.href\r\n      let app = this\r\n      //  !copyText.endsWith(\".ttl\") ?\r\n      //copyText = copyText+this.file.url //: \"\"\r\n      //  console.log(copyText)\r\n      navigator.clipboard.writeText(copyText).then(function() {\r\n        /* clipboard successfully set */\r\n        //  console.log(\"clipok\", copyText)\r\n        app.makeToast(\"The url is in your clipboard ;-)\", copyText+\".               Use Ctrl+V to share it\", \"success\")\r\n      }, function() {\r\n        /* clipboard write failed */\r\n        //  console.log(\"clipERROR\", copyText)\r\n        app.makeToast(\"Houston, we've got a problem with the clipboard ;-(\", copyText, \"warning\")\r\n      })\r\n\r\n    },\r\n\r\n    async  create(){\r\n      this.clear()\r\n      // //console.log(this.file)\r\n      // //console.log(this.newfile)\r\n      // //console.log(this.folder)\r\n      //    console.log(this.privacy)\r\n      this.tmp_file = {}\r\n      this.filename = this.filename.split(' ').join('_');\r\n\r\n      this.tmp_file.name =  this.filename.endsWith('.ttl') ? this.filename : this.filename+\".ttl\"\r\n      this.tmp_file.url = this.folder.url+this.tmp_file.name\r\n      //console.log(this.tmp_file)\r\n      this.thisNode = {id:this.tmp_file.url+\"#this\", label: this.filename}\r\n      this.nodes.push(this.thisNode)\r\n\r\n      let doc = {}\r\n      //console.log(this.file.url)\r\n      let exist = false\r\n      try{\r\n        doc =  await fetchDocument(this.tmp_file.url)\r\n        exist = true\r\n      }catch(e){\r\n        doc =  await createDocument(this.tmp_file.url)\r\n        exist = false\r\n\r\n      }\r\n\r\n      var dateObj = new Date();\r\n      var date = dateObj.toISOString()\r\n      //let doc =  await fetchDocument(this.file.url)\r\n      //console.log(doc)\r\n      let subj = doc.addSubject({identifier: \"this\"})\r\n\r\n      if(exist == false){\r\n        let this_label = this.thisNode.label\r\n        subj.addString(rdfs.label, this_label)\r\n        subj.addString(dct.created, date)\r\n        subj.addRef(rdf.type, \"https://scenaristeur.github.io/solid-vue-panes/Network\")\r\n        //console.log(\"file created\", this.tmp_file.url)\r\n\r\n      }else{\r\n        subj.addString(dct.modified, date)\r\n        //console.log(\"file modified\", this.tmp_file.url)\r\n\r\n      }\r\n      subj.addRef(foaf.maker, this.webId)\r\n      //console.log(\"one\")\r\n      //  let s =\r\n      await  doc.save()\r\n      //console.log(\"two\", s)\r\n\r\n      if(this.privacy == \"public_write\"){\r\n\r\n        //console.log(this.tmp_file.url)\r\n        const myDatasetWithAcl = await getSolidDatasetWithAcl(this.tmp_file.url);\r\n        //console.log(myDatasetWithAcl)\r\n        // Obtain the SolidDataset's own ACL, if available,\r\n        // or initialise a new one, if possible:\r\n        let resourceAcl;\r\n        if (!hasResourceAcl(myDatasetWithAcl)) {\r\n          if (!hasAccessibleAcl(myDatasetWithAcl)) {\r\n            throw new Error(\r\n              \"The current user does not have permission to change access rights to this Resource.\"\r\n            );\r\n          }\r\n\r\n          if (!hasFallbackAcl(myDatasetWithAcl)) {\r\n            throw new Error(\r\n              \"The current user does not have permission to see who currently has access to this Resource.\"\r\n            );\r\n            // Alternatively, initialise a new empty ACL as follows,\r\n            // but be aware that if you do not give someone Control access,\r\n            // **nobody will ever be able to change Access permissions in the future**:\r\n            // resourceAcl = createAcl(myDatasetWithAcl);\r\n          }\r\n          resourceAcl = createAclFromFallbackAcl(myDatasetWithAcl);\r\n          //console.log(\"create\")\r\n        } else {\r\n          resourceAcl = getResourceAcl(myDatasetWithAcl);\r\n          //console.log(\"get\")\r\n        }\r\n        //console.log(\"acl\",resourceAcl)\r\n        // Give someone Control access to the given Resource:\r\n        /*  const updatedAcl = setAgentResourceAccess(\r\n        resourceAcl,\r\n        \"https://some.pod/profile#webId\",\r\n        { read: false, append: false, write: false, control: true }\r\n      );*/\r\n      const ownerAcl = setAgentResourceAccess(resourceAcl,\r\n        this.webId,\r\n        { read: true, append: true, write: true, control: true },\r\n      );\r\n\r\n      //  let r =\r\n      await saveAclFor(myDatasetWithAcl, ownerAcl);\r\n      const publicAcl = setPublicResourceAccess(\r\n        resourceAcl,\r\n        { read: true, append: true, write: false, control: false },\r\n      );\r\n\r\n\r\n      // Now save the ACL:\r\n      //  let r =  await saveAclFor(myDatasetWithAcl, ownerAcl);\r\n      // let rp =\r\n      await saveAclFor(myDatasetWithAcl, publicAcl);\r\n      //console.log(r,rp)\r\n    }\r\n    this.createActivity()\r\n  },\r\n  createActivity(){\r\n    //console.log(\"createActivity\")\r\n\r\n    this.net.displayType = \"Network\"\r\n    this.net.types = [\"Task\", \"http://www.w3.org/ns/ldp#Resource\"]\r\n    this.net.path = this.tmp_file.url\r\n    //console.log(this.net)\r\n    this.activity = {\r\n      actor: {name: this.$store.state.solid.webId},\r\n      type:\"Create\",\r\n      summary: \"\",\r\n      object:{\r\n        name: this.thisNode.label,\r\n        url: this.tmp_file.url,\r\n        type:\"Network\"}\r\n      }\r\n\r\n      this.sendActivity()\r\n\r\n\r\n    },\r\n    clear(){\r\n      this.nodes = []\r\n      this.edges = []\r\n    },\r\n    openCommand(){\r\n      this.$bvModal.show(\"command-popup\")\r\n    },\r\n    async update(){\r\n      this.triples = []\r\n      //console.log(this.file.url)\r\n      let split_hash = this.file.url.split(\"#\")\r\n      this.file.url = split_hash[0]\r\n      this.file.localname = split_hash[1]\r\n      if (this.file.url != undefined && (this.file.url.endsWith('.ttl') || (this.file.url.endsWith('card')))){\r\n      //  this.clear()\r\n        let fileDoc = await fetchDocument(this.file.url)\r\n        //  console.log(\"fileDoc\",fileDoc)\r\n        this.triples = fileDoc.getTriples()\r\n        //console.log(this.triples)\r\n      }else{\r\n        //console.log(\"TODO\",this.file.url)\r\n      }\r\n      if (this.triples.length > 0){\r\n        this.triples.forEach((t) => {\r\n          //console.log(\"trip\",t)\r\n          this.addTriplet(t)\r\n        });\r\n\r\n      }\r\n\r\n    },\r\n    addTriplet(t){\r\n      // ////console.log(t)\r\n      // ////console.log(t.subject.id, t.predicate.id, t.object.id)\r\n      var color = this.colorize(t.subject.id)\r\n      let label =  this.lastPart(t.subject.id)\r\n\r\n      if (t.predicate.id == \"http://www.w3.org/2000/01/rdf-schema#label\"){\r\n        //console.log(\"LABEL\",t.object.id)\r\n        label = t.object.id\r\n      }\r\n\r\n      let subjectNode = { id:t.subject.id, label: label, shape: \"star\", color:'rgba('+color.red+', '+color.green+', '+color.blue+',0.5)'  }\r\n      // ////console.log(subjectNode)\r\n      //  this.dataset.nodes[subjectNode.id] = subjectNode\r\n      subjectNode  = this.addOrNothingNode(subjectNode)\r\n\r\n      var colorO = this.colorize(t.object.id)\r\n      let labelO =  this.lastPart(t.object.id)\r\n\r\n\r\n\r\n\r\n      let objectNode = { id:t.object.id, label: labelO, shape: \"box\", color:'rgba('+colorO.red+', '+colorO.green+', '+colorO.blue+',0.5)'  }\r\n      // ////console.log(objectNode)\r\n      //  this.dataset.nodes[subjectNode.id] = subjectNode\r\n      this.addOrNothingNode(objectNode)\r\n\r\n      let labelP = this.lastPart(t.predicate.id)\r\n      let propertyEdge = {from: subjectNode.id, to: objectNode.id, label: labelP}\r\n      this.edges.push(propertyEdge)\r\n\r\n\r\n\r\n    },\r\n\r\n    /*async getData() {\r\n    let dataDoc = await fetchDocument(this.url);\r\n    let subj = dataDoc.getSubject(this.url+\"#this\")\r\n    console.log(subj)\r\n    let types = subj.getAllRefs(rdf.type)\r\n    console.log(types)\r\n  }*/\r\n},\r\n\r\nwatch:{\r\n  file(){\r\n    //console.log(this.file)\r\n    this.update()\r\n  },\r\n\r\n  /*'$route' (to) {\r\n  //  '$route' (to, from) {\r\n  console.log(to)\r\n},\r\nurl(url){\r\nconsole.log(\"URL CHANGE\",url)\r\n}*/\r\n},\r\ncomputed:{\r\n  folder:{\r\n    get: function() { return this.$store.state.solid.folder},\r\n    set: function() {}\r\n  },\r\n  profile_url:{\r\n    get: function() { return this.$store.state.solid.storage+\"public/popock/profile.ttl\"},\r\n    set: function() {}\r\n  },\r\n  storage:{\r\n    get: function() { return this.$store.state.solid.storage},\r\n    set: function() {}\r\n  },\r\n  webId:{\r\n    get: function() { return this.$store.state.solid.webId},\r\n    set: function() {}\r\n  },\r\n  friends:{\r\n    get: function() { return this.$store.state.solid.friends},\r\n    set: function() {}\r\n  },\r\n  file: {\r\n    get: function () {return this.$store.state.solid.file},\r\n    set: function (file) {return this.$store.commit('solid/setFile', file)}\r\n  },\r\n},\r\n}\r\n</script>\r\n<style>\r\n.wrapper{\r\n  min-height: 100vh;\r\n  border: 1px solid black;\r\n  background: linear-gradient(to bottom, rgba(215, 215, 255), rgba(250, 250, 170));\r\n  padding: 10px;\r\n  height: 100vh;\r\n}\r\n#operation {\r\n  font-size:28px;\r\n}\r\n#node-popUp {\r\n  display:none;\r\n  position:absolute;\r\n  top:350px;\r\n  left:170px;\r\n  z-index:299;\r\n  width:250px;\r\n  height:120px;\r\n  background-color: #f9f9f9;\r\n  border-style:solid;\r\n  border-width:3px;\r\n  border-color: #5394ed;\r\n  padding:10px;\r\n  text-align: center;\r\n}\r\n#edge-popUp {\r\n  display:none;\r\n  position:absolute;\r\n  top:350px;\r\n  left:170px;\r\n  z-index:299;\r\n  width:250px;\r\n  height:90px;\r\n  background-color: #f9f9f9;\r\n  border-style:solid;\r\n  border-width:3px;\r\n  border-color: #5394ed;\r\n  padding:10px;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorNetwork.vue?vue&type=template&id=4ce6d4a8&\"\nimport script from \"./EditorNetwork.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorNetwork.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditorNetwork.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}
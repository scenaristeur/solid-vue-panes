(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c700d8e0"],{"60b0":function(e,t,n){"use strict";n("c976")},a434:function(e,t,n){"use strict";var o=n("23e7"),r=n("23cb"),i=n("a691"),a=n("50c4"),s=n("7b0b"),l=n("65f0"),d=n("8418"),c=n("1dde"),u=n("ae40"),f=c("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,b=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var n,o,c,u,f,p,v=s(this),w=a(v.length),y=r(e,w),k=arguments.length;if(0===k?n=o=0:1===k?(n=0,o=w-y):(n=k-2,o=b(h(i(t),0),w-y)),w+n-o>m)throw TypeError(g);for(c=l(v,o),u=0;u<o;u++)f=y+u,f in v&&d(c,u,v[f]);if(c.length=o,n<o){for(u=y;u<w-o;u++)f=u+o,p=u+n,f in v?v[p]=v[f]:delete v[p];for(u=w;u>w-o+n;u--)delete v[u-1]}else if(n>o)for(u=w-o;u>y;u--)f=u+o-1,p=u+n-1,f in v?v[p]=v[f]:delete v[p];for(u=0;u<n;u++)v[u+y]=arguments[u+2];return v.length=w-o+n,c}})},b803:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modele-view"},[e._v(" Reprendre network3 "),n("small",[e._v(" File: "),n("a",{attrs:{href:e.file.url,target:"_blank"}},[e._v(e._s(e.file.url))]),n("br"),e._v(" Node: "+e._s(e.node.label)),n("br")]),n("b-input",{attrs:{placeholder:"filename without spaces or any exotic char"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}}),n("b-button",{on:{click:e.create}},[e._v("New")]),n("b-form-checkbox",{staticClass:"m-2",attrs:{id:"checkbox-1",name:"checkbox-1",value:"public_write","unchecked-value":"private_write",checked:""},model:{value:e.privacy,callback:function(t){e.privacy=t},expression:"privacy"}},[e._v(" Anyone can amend this file ")]),n("b-button",{attrs:{size:"sm",variant:"warning"},on:{click:e.clear}},[e._v("Clear")]),n("b-button",{attrs:{size:"sm",variant:"success"},on:{click:e.copy}},[e._v("Copy")]),n("b-button",{attrs:{size:"sm",variant:"success"},on:{click:e.openCommand}},[e._v("Command")]),n("network",{ref:"network",staticClass:"wrapper",attrs:{nodes:e.nodes,edges:e.edges,options:e.options},on:{"select-node":e.selectNode,"select-edge":e.selectEdge}}),n("NodeModal",{on:{ok:e.saveNode},model:{value:e.node,callback:function(t){e.node=t},expression:"node"}}),n("EdgeModal",{on:{ok:e.saveEdge},model:{value:e.edge,callback:function(t){e.edge=t},expression:"edge"}}),n("CommandModal",{attrs:{inputNew:e.inputNew},on:{ok:e.saveCommand},model:{value:e.command,callback:function(t){e.command=t},expression:"command"}})],1)},r=[],i=(n("4de4"),n("4160"),n("caad"),n("c975"),n("a15b"),n("d81d"),n("a434"),n("b0c0"),n("d3b7"),n("ac1f"),n("8a79"),n("2532"),n("1276"),n("159b"),n("96cf"),n("1da1")),a=(n("38b4"),n("4d8d")),s=n("6dc1"),l=n("93ef"),d=n("234f"),c=n("1404"),u=n("fd2a"),f=(n("fb6a"),n("3ca3"),n("5319"),n("2ca0"),n("498a"),n("ddb0"),n("2b3d"),{data:function(){return{commandHistory:[]}},methods:{getInputType:function(e){var t={};if(this.isValidUrl(e))t.type="url",t.value=e,t.isFile=this.isFile(e);else{var n=e.charAt(0),o="";switch(n){case"/":t.type="commande",t.value=e,t.inputNew="",this.catchCommande(t);break;case".":o=this.commandHistory[this.commandHistory.length-1],t.inputNew=o.s+" "+o.p+" "+o.o;break;case";":o=this.commandHistory[this.commandHistory.length-1],t.inputNew=o.s+" "+o.p+" ";break;case",":o=this.commandHistory[this.commandHistory.length-1],t.inputNew=o.s+" ";break;default:t=this.traiteTriplet(e),this.catchTriplet(t)}}return t},traiteTriplet:function(e){var t={},n="",o=e.slice(-1),r=e.slice(0,-1).split(" "),i=!0,a="",s=[];switch(r.forEach((function(e){e=e.trim(),e.startsWith('"')?(a="debut",s.push(e.substr(1))):e.endsWith('"')?(a="fin",s.push(s.pop()+" "+e.slice(0,-1))):"debut"==a?s.push(s.pop()+" "+e):s.push(e)})),s.length>0&&(r=s),o){case".":n="";break;case";":n=r[0].indexOf(" ")>-1?'"'+r[0]+'" ':r[0]+" ";break;case",":n=r[0].indexOf(" ")>-1?'"'+r[0]+'" ':r[0]+" ",r[1].indexOf(" ")>-1?n+='"'+r[1]+'" ':n+=r[1]+" ";break;case"-":n=r[2].indexOf(" ")>-1?'"'+r[2]+'" ':r[2]+" ";break;default:console.log("message to chat "+e),n="",i=!1}if(i){t.type="triplet";var l={};l.subject=r[0],l.predicate=r[1],l.object=r[2],t.value=l,t.inputNew=n}else t.type="message",t.value=e,t.inputNew=n;return t},catchTriplet:function(e){var t=e.value.subject,n=e.value.predicate,o=e.value.object,r=this.nodes.filter((function(e){return e.label==t})),i=this.nodes.filter((function(e){return e.label==o}));console.log(n,r,i),0==r.length&&(r={id:this.file.url+"#"+t,label:t},this.nodes.push(r)),0==i.length&&(i={id:this.file.url+"#"+o,label:o},this.nodes.push(i)),console.log(this.$refs.network.nodes),r=this.$refs.network.nodes.filter((function(e){return e.label==t})),i=this.$refs.network.nodes.filter((function(e){return e.label==o})),r=r[0],i=i[0],console.log(r,i);var a={from:r.id,to:i.id,label:n};this.edges.push(a),console.log(a),this.writeEdgeToFile(a)},catchTriplet1:function(e){var t=e.value.subject,n=e.value.predicate,o=e.value.object,r=this.network.body.data.nodes.get({filter:function(e){return e.label==t}}),i=this.network.body.data.nodes.get({filter:function(e){return e.label==o}});if(0==r.length){var a={label:t,color:{border:document.getElementById("bordercolorpicker").value,background:document.getElementById("bodycolorpicker").value}};this.network.body.data.nodes.add(a)}if(0==i.length){var s={label:o,color:{border:document.getElementById("bordercolorpicker").value,background:document.getElementById("bodycolorpicker").value}};this.network.body.data.nodes.add(s)}r=this.network.body.data.nodes.get({filter:function(e){return e.label==t}}),i=this.network.body.data.nodes.get({filter:function(e){return e.label==o}}),this.network.body.data.edges.add({label:n,from:r[0].id,to:i[0].id,color:{inherit:"both"}});var l=this.network.body.data.edges.get({filter:function(e){return e.from==r[0].id&&e.to==i[0].id&&e.label==n}});console.log("EDGE is necessaire ici ?",l)},catchCommande:function(e){switch(console.log(e),e.value){case"/h":case"/help":case"/aide":console.log("help");break;case"/e":case"/export":case"/exportJson":console.log("exportjson");break;case"/t":console.log("exportTtl");break;case"/i":case"/import":case"/importJson":console.log("import"),document.getElementById("import-popUp").style.display="block";break;case"/p":console.log("save_to_pod"),document.getElementById("select-pod-popUp").style.display="block";break;case"/a":console.log("open editor"),document.getElementById("editeur-popUp").style.display="block";break;case"/r":console.log("reglages editor");break;case"/n":console.log("new graph"),this.clear();break;case"/l":console.log("connection a la base levelgraph");break;case"/c":this.downloadCanvas();break;default:console.log("non traite"+e)}},exportTtl:function(e){var t=e.body.data.nodes.get({filter:function(e){return 1!=e.cid}}),n=e.body.data.edges.get({filter:function(e){return 1!=e.cid}});console.log("exportation"),console.log(t),console.log(n);for(var o=new Array,r=new Array,i=0;i<n.length;i++){var a=n[i],s=a.from,l=a.label.replace(/\s/g,"_"),d=a.to;console.log(d);var c=e.body.data.nodes.get(s).label.replace(/\n/g,"");try{var u=e.body.data.nodes.get(d).label.replace(/\n/g,"")}catch(y){console.error("ERREUR NONTRAITEE"),console.error(y)}var f=this.validRdf(e,s),p=this.validRdf(e,l),h=this.validRdf(e,d);-1==f.indexOf(":")&&(f="_:"+f),-1==p.indexOf(":")&&(p=":"+p),-1==h.indexOf(":")&&(h="_:"+h);var b=["owl:AnnotationProperty","owl:ObjectProperty","owl:DatatypeProperty"],m=1;"type"==p||":type"==p||"rdf:type"==p||":a"==p||":est_un"==p||":est_une"==p||":is_a"==p?(p="rdf:type",r.push(h+" rdf:type owl:Class . \n"),m=1):"subClassOf"==p||":subClassOf"==p||"rdfs:subClassOf"==p?p="rdfs:subClassOf":"sameAs"==p||":sameAs"==p?(p="owl:sameAs",m=-1):"ispartof"==p.toLowerCase()||"partof"==p.toLowerCase()||":partof"==p.toLowerCase()||":ispartof"==p.toLowerCase()?(p="smag:partOf",m=1):"comment"!=p.toLowerCase()&&"commentaire"!=p.toLowerCase()&&"//"!=p.toLowerCase()&&"#"!=p.toLowerCase()||(p="rdfs:comment",m=-1),m>=0&&r.push(p+" rdf:type "+b[m]+" . \n");var g=f+" "+p+" "+h+" . \n";g+=f+' rdfs:label "'+c+'" . \n',g+=h+' rdfs:label "'+u+'" . \n',o[i]=g,console.log(g),console.log("||||||||||||||||||||||--")}o=this.uniq_fast(o.sort()),r=this.uniq_fast(r.sort());for(var v=0;v<o.length;v++)o[v];for(var w=0;w<r.length;w++)r[w]},uniq_fast:function(e){for(var t={},n=[],o=e.length,r=0,i=0;i<o;i++){var a=e[i];1!==t[a]&&(t[a]=1,n[r++]=a)}return n},validRdf:function(e,t){console.log(e.body.data.nodes.get(t)),console.log("nettoyage "+t);var n={type:"uri"};return-1!==t.indexOf(" ")&&(n.type="literal"),t},downloadCanvas:function(){var e=document.getElementById("mynetwork").childNodes[0].canvas;console.log(e);var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.fillStyle="#FFFFFF",n.fillRect(0,0,e.width,e.height),n.drawImage(e,0,0);var o=t.toDataURL(),r=document.createElement("a");r.download="image.png",r.href=o,document.body.appendChild(r),r.click(),document.body.removeChild(r)},isFile:function(e){return e.split("/").pop().indexOf(".")>-1},isValidUrl:function(e){try{return new URL(e),!0}catch(t){return!1}},traiteInput:function(e){switch(console.log(e),e.type){case"commande":break;case"triplet":break;case"url":var t=e;t.source=e.value,console.log("IMPORTER, see spoggy-simple /js/import-export");break;default:}}}}),p={name:"EditorNetwork",components:{NodeModal:function(){return n.e("chunk-fad8e306").then(n.bind(null,"b7ab"))},EdgeModal:function(){return n.e("chunk-4e25104e").then(n.bind(null,"4e1d"))},CommandModal:function(){return n.e("chunk-1a7955d8").then(n.bind(null,"501d"))}},mixins:[d["a"],c["a"],u["a"],f],data:function(){var e=this;return{self:this,node:{label:"node_label"},edge:{},filename:"new_graph.ttl",privacy:"public_write",net:{},command:"",inputNew:"",nodes:[{id:1,label:"circle",shape:"circle"},{id:2,label:"ellipse",shape:"ellipse"},{id:3,label:"database",shape:"database"},{id:4,label:"box",shape:"box"},{id:5,label:"diamond",shape:"diamond"},{id:6,label:"dot",shape:"dot"},{id:7,label:"square",shape:"square"},{id:8,label:"triangle",shape:"triangle"}],edges:[{from:1,to:2},{from:2,to:3},{from:2,to:4},{from:2,to:5},{from:5,to:6},{from:5,to:7},{from:6,to:8}],options:{edges:{arrows:"to",scaling:{label:!0},smooth:!0},interaction:{navigationButtons:!0},manipulation:{enabled:!0,initiallyActive:!0,addNode:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addNode(n,o);case 1:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}(),editNode:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.editNode(n,o);case 1:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}(),addEdge:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addEdge(n,o);case 1:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}(),editEdge:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.editEdge(n,o);case 1:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}}}},created:function(){this.folder=this.$store.state.solid.folder,this.update()},methods:{selectNode:function(e){try{this.file={},this.file.url=e.nodes[0],this.update()}catch(e){console.log(e)}},selectEdge:function(e){console.log(e.edges[0])},saveCommand:function(e){var t=this.getInputType(e);this.traiteInput(t),this.inputNew=t.inputNew},addNode:function(e,t){null!=this.tmp_file&&(this.file=this.tmp_file),e.id=this.file.url+"#"+e.id,e.label="",this.editNode(e,t)},editNode:function(e){this.node=e,this.$bvModal.show("node-popup")},addEdge:function(e,t){if(this.edge=e,e.from==e.to){var n=confirm("Do you want to connect the node to itself?");if(1!=n)return void t(null)}this.editEdgeWithoutDrag(e,t)},editEdge:function(e,t){this.editEdgeWithoutDrag(e,t)},editEdgeWithoutDrag:function(e,t){this.edge=e,this.$bvModal.show("edge-popup"),t()},saveNode:function(e){var t=this.nodes.map((function(e){return e.id})).indexOf(e.id);t>-1?(this.nodes.splice(t,1),this.nodes[t].label=e.label):this.nodes.push(e)},saveEdge:function(e){var t=this.edges.map((function(e){return e.id})).indexOf(e.id);t>-1?this.edges[t].label=e.label:(this.edges.push(e),this.writeEdgeToFile(e))},writeEdgeToFile:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var o,r,i,l,d,c,u,f,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return null!=t.tmp_file&&(t.file=t.tmp_file),o=t.nodes.filter((function(t){return t.id==e.from})),r=t.nodes.filter((function(t){return t.id==e.to})),i=o[0].id.includes(t.file.url)?o[0].id.split("#")[1]:o[0].id,l=r[0].id.includes(t.file.url)?r[0].id.split("#")[1]:r[0].id,d=new Date,c=d.toISOString(),n.next=9,Object(a["b"])(t.file.url);case 9:u=n.sent,f=u.addSubject({identifier:i}),f.addString(s["e"].label,o[0].label),f.addString(s["a"].modified,c),f.addRef(s["b"].maker,t.webId),f.addRef(t.file.url+"#"+e.label,r[0].id),p=u.addSubject({identifier:l}),p.addString(s["e"].label,r[0].label),u.save();case 18:case"end":return n.stop()}}),n)})))()},networkEvent:function(e,t){console.log(e,t)},copy:function(){var e="https://scenaristeur.github.io/solid-vue-panes/view/"+this.file.url,t=this;navigator.clipboard.writeText(e).then((function(){t.makeToast("The url is in your clipboard ;-)",e+".               Use Ctrl+V to share it","success")}),(function(){t.makeToast("Houston, we've got a problem with the clipboard ;-(",e,"warning")}))},create:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,o,r,i,d,c,u,f,p,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clear(),e.tmp_file={},e.filename=e.filename.split(" ").join("_"),e.tmp_file.name=e.filename.endsWith(".ttl")?e.filename:e.filename+".ttl",e.tmp_file.url=e.folder.url+e.tmp_file.name,e.thisNode={id:e.tmp_file.url+"#this",label:e.filename},e.nodes.push(e.thisNode),n={},o=!1,t.prev=9,t.next=12,Object(a["b"])(e.tmp_file.url);case 12:n=t.sent,o=!0,t.next=22;break;case 16:return t.prev=16,t.t0=t["catch"](9),t.next=20,Object(a["a"])(e.tmp_file.url);case 20:n=t.sent,o=!1;case 22:return r=new Date,i=r.toISOString(),d=n.addSubject({identifier:"this"}),0==o?(c=e.thisNode.label,d.addString(s["e"].label,c),d.addString(s["a"].created,i),d.addRef(s["d"].type,"https://scenaristeur.github.io/solid-vue-panes/Network")):d.addString(s["a"].modified,i),d.addRef(s["b"].maker,e.webId),t.next=29,n.save();case 29:if("public_write"!=e.privacy){t.next=48;break}return t.next=32,Object(l["j"])(e.tmp_file.url);case 32:if(u=t.sent,Object(l["s"])(u)){t.next=41;break}if(Object(l["q"])(u)){t.next=36;break}throw new Error("The current user does not have permission to change access rights to this Resource.");case 36:if(Object(l["r"])(u)){t.next=38;break}throw new Error("The current user does not have permission to see who currently has access to this Resource.");case 38:f=Object(l["a"])(u),t.next=42;break;case 41:f=Object(l["h"])(u);case 42:return p=Object(l["w"])(f,e.webId,{read:!0,append:!0,write:!0,control:!0}),t.next=45,Object(l["u"])(u,p);case 45:return h=Object(l["y"])(f,{read:!0,append:!0,write:!1,control:!1}),t.next=48,Object(l["u"])(u,h);case 48:e.createActivity();case 49:case"end":return t.stop()}}),t,null,[[9,16]])})))()},createActivity:function(){this.net.displayType="Network",this.net.types=["Task","http://www.w3.org/ns/ldp#Resource"],this.net.path=this.tmp_file.url,this.activity={actor:{name:this.$store.state.solid.webId},type:"Create",summary:"",object:{name:this.thisNode.label,url:this.tmp_file.url,type:"Network"}},this.sendActivity()},clear:function(){this.nodes=[],this.edges=[]},openCommand:function(){this.$bvModal.show("command-popup")},update:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.triples=[],n=e.file.url.split("#"),e.file.url=n[0],e.file.localname=n[1],void 0==e.file.url||!e.file.url.endsWith(".ttl")&&!e.file.url.endsWith("card")){t.next=11;break}return t.next=7,Object(a["b"])(e.file.url);case 7:o=t.sent,e.triples=o.getTriples(),t.next=11;break;case 11:e.triples.length>0&&e.triples.forEach((function(t){e.addTriplet(t)}));case 12:case"end":return t.stop()}}),t)})))()},addTriplet:function(e){var t=this.colorize(e.subject.id),n=this.lastPart(e.subject.id);"http://www.w3.org/2000/01/rdf-schema#label"==e.predicate.id&&(n=e.object.id);var o={id:e.subject.id,label:n,shape:"star",color:"rgba("+t.red+", "+t.green+", "+t.blue+",0.5)"};o=this.addOrNothingNode(o);var r=this.colorize(e.object.id),i=this.lastPart(e.object.id),a={id:e.object.id,label:i,shape:"box",color:"rgba("+r.red+", "+r.green+", "+r.blue+",0.5)"};this.addOrNothingNode(a);var s=this.lastPart(e.predicate.id),l={from:o.id,to:a.id,label:s};this.edges.push(l)}},watch:{file:function(){this.update()}},computed:{folder:{get:function(){return this.$store.state.solid.folder},set:function(){}},profile_url:{get:function(){return this.$store.state.solid.storage+"public/popock/profile.ttl"},set:function(){}},storage:{get:function(){return this.$store.state.solid.storage},set:function(){}},webId:{get:function(){return this.$store.state.solid.webId},set:function(){}},friends:{get:function(){return this.$store.state.solid.friends},set:function(){}},file:{get:function(){return this.$store.state.solid.file},set:function(e){return this.$store.commit("solid/setFile",e)}}}},h=p,b=(n("60b0"),n("2877")),m=Object(b["a"])(h,o,r,!1,null,null,null);t["default"]=m.exports},c976:function(e,t,n){},d81d:function(e,t,n){"use strict";var o=n("23e7"),r=n("b727").map,i=n("1dde"),a=n("ae40"),s=i("map"),l=a("map");o({target:"Array",proto:!0,forced:!s||!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-c700d8e0.19b8ca6e.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd1e7e04"],{4380:function(e,t,r){"use strict";r("4160"),r("b0c0"),r("d3b7"),r("ac1f"),r("1276"),r("159b"),r("ddb0");var n=r("b85c"),s=(r("96cf"),r("1da1")),a=r("4d8d"),c=r("6dc1"),o=r("00e8"),i=r.n(o),u=window.SolidFileClient,l=new u(i.a);t["a"]={methods:{getProfile:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,o,i,u,p,g,w,b,d,h,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={friends:[]},r.webId=t,e.prev=2,e.next=5,Object(a["b"])(t);case 5:return n=e.sent,s=n.getSubject(t),r.name=s.getString(c["i"].fn),r.organization=s.getString("http://www.w3.org/2006/vcard/ns#organization-name"),r.role=s.getString(c["i"].role),r.photo=s.getRef(c["i"].hasPhoto),r.bday=s.getString(c["i"].bday),r.gender=s.getString(c["i"].hasGender),r.note=s.getString(c["i"].note),r.friends=s.getAllRefs(c["b"].knows),o=s.getRef(c["i"].hasAddress),null!=o&&(i=n.getSubject(o),r.locality=i.getString(c["i"].locality),r.country=i.getString("http://www.w3.org/2006/vcard/ns#country-name"),r.postal=i.getString("http://www.w3.org/2006/vcard/ns#postal-code"),r.region=i.getString(c["i"].region),r.address=i.getString("http://www.w3.org/2006/vcard/ns#street-address")),e.next=19,this.getWorkspaces(t);case 19:if(r.workspaces=e.sent,!(r.workspaces.length>0)){e.next=44;break}console.log("PF",r.workspaces),e.t0=regeneratorRuntime.keys(r.workspaces);case 23:if((e.t1=e.t0()).done){e.next=43;break}if(u=e.t1.value,p=r.workspaces[u],"gouvernance"!=p.name){e.next=41;break}return g=p.path+"groups",w=p.path+"tensions",console.log("ww",p,g,w),e.next=32,l.readFolder(g);case 32:return b=e.sent,e.next=35,l.readFolder(g);case 35:d=e.sent,h=b.files,f=d.files,console.log(h,f),r.groups=h,r.tensions=f;case 41:e.next=23;break;case 43:console.log("PROFILE",t,r);case 44:e.next=49;break;case 46:e.prev=46,e.t2=e["catch"](2),this.makeToast(e.t2.message,t,"warning");case 49:return e.abrupt("return",r);case 50:case"end":return e.stop()}}),e,this,[[2,46]])})));function t(t){return e.apply(this,arguments)}return t}(),getInboxUrls:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],e.prev=1,e.next=4,Object(a["b"])(t);case 4:return n=e.sent,s=n.getSubject(t),e.next=8,s.getAllRefs(c["c"].inbox);case 8:r=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.makeToast(e.t0.message,t,"warning");case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(t){return e.apply(this,arguments)}return t}(),getFriends:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],e.prev=1,e.next=4,Object(a["b"])(t);case 4:return n=e.sent,s=n.getSubject(t),e.next=8,s.getAllRefs(c["b"].knows);case 8:r=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.makeToast(e.t0.message,t,"warning");case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(t){return e.apply(this,arguments)}return t}(),getWorkspaces:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,s,o,i,u,p,g,w,b,d,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],e.next=3,solid.data[t].storage;case 3:if(s=e.sent,o=s+"public/popock/workspaces.ttl",!l.itemExists(o)){e.next=18;break}return i={},e.prev=7,e.next=10,Object(a["b"])(o);case 10:i=e.sent,u=i.getAllSubjectsOfType("http://www.w3.org/ns/pim/space#Workspace"),p=Object(n["a"])(u);try{for(p.s();!(g=p.n()).done;)w=g.value,b=w.getLiteral(c["d"].label),d=w.getRef("http://www.w3.org/ns/pim/space#storage"),h=w.getRef("http://www.w3.org/ns/solid/terms#webId"),r.push({name:b,path:d,pod:h,subject:w.asRef().split("#")[1]})}catch(f){p.e(f)}finally{p.f()}e.next=18;break;case 16:e.prev=16,e.t0=e["catch"](7);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));function t(t){return e.apply(this,arguments)}return t}(),getGroups:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],e.next=3,this.getWorkspaces(t);case 3:n=e.sent,n.length>0&&(console.log(t,n),n.forEach(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("gouvernance"!=t.name){e.next=10;break}return console.log(t.name,t.path,t.subject),n=t.path+"groups",console.log("groups_folder",n),e.next=6,l.readFolder(n);case 6:return s=e.sent,r=s.files,console.log("GGGGGGGRRRRoups 2",r),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getTensions:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],e.next=3,this.getWorkspaces(t);case 3:return n=e.sent,n.length>0&&(console.log(t,n),n.forEach(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.name,t.path,t.subject),"gouvernance"!=t.name){e.next=9;break}return n=t.path+"tensions",console.log("TTTTTTTTTension folder",n),e.next=6,l.readFolder(n);case 6:s=e.sent,r=s.files,console.log("TTTTTENSIONS",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addIndex:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r,n){var s,o,i,u,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t+"/index.ttl#this",o=new Date,i=o.toISOString(),u=this.$store.state.solid.indexes.puti,e.next=6,Object(a["b"])(u.url);case 6:return l=e.sent,e.next=9,l.addSubject();case 9:return p=e.sent,p.addLiteral(c["e"].label,n),p.addNodeRef("http://www.w3.org/ns/solid/terms#forClass",r),p.addNodeRef("http://www.w3.org/ns/solid/terms#instance",s),p.addLiteral(c["a"].created,i),e.next=16,l.save();case 16:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}(),getIndexes:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,o,i,u,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={puti:{instances:[],classes:[]},prti:{instances:[],classes:[]}},e.prev=1,e.next=4,Object(a["b"])(t);case 4:return n=e.sent,o=n.getSubject(t),e.next=8,o.getNodeRef("http://www.w3.org/ns/solid/terms#publicTypeIndex");case 8:return i=e.sent,e.next=11,o.getNodeRef("http://www.w3.org/ns/solid/terms#privateTypeIndex");case 11:return u=e.sent,r.puti.url=i,r.prti.url=u,e.next=16,Object(a["b"])(i);case 16:return l=e.sent,e.next=19,l.findSubjects("http://www.w3.org/ns/solid/terms#forClass");case 19:p=e.sent,p.forEach(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getRef("http://www.w3.org/ns/solid/terms#forClass");case 2:return n=e.sent,e.next=5,t.getRef("http://www.w3.org/ns/solid/terms#instance");case 5:return s=e.sent,e.next=8,t.getString(c["a"].created);case 8:return a=e.sent,e.next=11,t.getString(c["e"].label);case 11:o=e.sent,r.puti.instances.push({instance:s,classe:n,label:o,created:a}),void 0==r.puti.classes[n]&&(r.puti.classes[n]=[]),r.puti.classes[n].push(s);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=25;break;case 23:e.prev=23,e.t0=e["catch"](1);case 25:return console.log(t,r),e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,null,[[1,23]])})));function t(t){return e.apply(this,arguments)}return t}(),makeToast:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(t,{title:e,variant:r,solid:!0})}}}},eb27:function(e,t,r){"use strict";r("96cf");var n=r("1da1"),s=r("93ef"),a=r("4d8d"),c=r("6dc1"),o=r("00e8"),i=r.n(o),u=window.SolidFileClient;console.log("SFC",u);var l=new u(i.a);t["a"]={created:function(){},methods:{configureInbox:function(e,t){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var o,i,u,p,g,w,b,d,h,f,x,v,m,k,j,O;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("configureInbox",e,t,r.storage),o=r.storage+"popock/inbox_log.ttl",n.next=4,l.itemExists(e);case 4:if(i=n.sent,i){n.next=8;break}return n.next=8,l.createFolder(e);case 8:return u={},n.prev=9,n.next=12,Object(a["b"])(o);case 12:u=n.sent,n.next=24;break;case 15:return n.prev=15,n.t0=n["catch"](9),n.next=19,Object(a["a"])(o);case 19:return u=n.sent,p=u.addSubject(),p.addNodeRef(c["f"].about,"init"),n.next=24,u.save();case 24:return n.prev=24,n.next=27,Object(s["g"])(e);case 27:return g=n.sent,w=Object(s["c"])(g,t),b=Object(s["d"])(g),null==w&&alert("Are you sure that you have allowed me to 'CONTROL' your POD, I can't read Acl of "+e+". I got a NULL value !! Please check your POD / Preferences / Trusted Application. "),console.log("inbox_url: ",e,"inbox_exists: ",i,"agentAcces: ",w,"publicAccess:",b),n.next=34,l.itemExists(o);case 34:if(d=n.sent,console.log("inbox_log_file_exists:",d),Object(s["o"])(g)){n.next=44;break}if(Object(s["m"])(g)){n.next=39;break}throw new Error("The current user does not have permission to change access rights to this Resource.");case 39:if(Object(s["n"])(g)){n.next=41;break}throw new Error("The current user does not have permission to see who currently has access to this Resource.");case 41:h=Object(s["a"])(g),n.next=45;break;case 44:h=Object(s["e"])(g);case 45:return f=Object(s["r"])(h,t,{read:!0,append:!0,write:!0,control:!0}),x=Object(s["q"])(h,t,{read:!0,append:!0,write:!0,control:!0}),v=Object(s["t"])(h,{read:!0,append:!0,write:!1,control:!1}),m=Object(s["s"])(h,{read:!1,append:!0,write:!1,control:!1}),n.prev=49,n.next=52,Object(s["p"])(g,f);case 52:console.log("owner Resource"),n.next=58;break;case 55:n.prev=55,n.t1=n["catch"](49),console.log("todo if 409 conflict : must test if ok before patch");case 58:return n.prev=58,n.next=61,Object(s["p"])(g,x);case 61:console.log("owner default"),n.next=67;break;case 64:n.prev=64,n.t2=n["catch"](58),console.log("todo if 409 conflict : must test if ok before patch");case 67:return n.prev=67,n.next=70,Object(s["p"])(g,v);case 70:console.log("posters Resource"),n.next=76;break;case 73:n.prev=73,n.t3=n["catch"](67),console.log("todo if 409 conflict : must test if ok before patch");case 76:return n.prev=76,n.next=79,Object(s["p"])(g,m);case 79:console.log("submitters Default"),n.next=85;break;case 82:n.prev=82,n.t4=n["catch"](76),console.log("todo if 409 conflict : must test if ok before patch");case 85:return n.next=87,Object(s["g"])(o);case 87:if(k=n.sent,Object(s["o"])(k)){n.next=96;break}if(Object(s["m"])(k)){n.next=91;break}throw new Error("The current user does not have permission to change access rights to this Resource.");case 91:if(Object(s["n"])(k)){n.next=93;break}throw new Error("The current user does not have permission to see who currently has access to this Resource.");case 93:j=Object(s["a"])(k),n.next=97;break;case 96:j=Object(s["e"])(k);case 97:return console.log("Log acl",j),O=Object(s["t"])(j,{read:!0,append:!0,write:!1,control:!1}),n.next=101,Object(s["p"])(k,O);case 101:console.log("logfile Default"),n.next=107;break;case 104:n.prev=104,n.t5=n["catch"](24),console.log("erreur",n.t5);case 107:case"end":return n.stop()}}),n,null,[[9,15],[24,104],[49,55],[58,64],[67,73],[76,82]])})))()}}}}}]);
//# sourceMappingURL=chunk-cd1e7e04.b13a016c.js.map
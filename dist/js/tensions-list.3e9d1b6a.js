(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tensions-list"],{1404:function(t,e,a){"use strict";var r=a("1da1"),n=(a("b0c0"),a("a15b"),a("fb6a"),a("ac1f"),a("1276"),a("2ca0"),a("96cf"),a("4d8d")),i=a("6dc1"),s=a("d33b");e["a"]={mixins:[s["a"]],created:function(){this.webId=this.$store.state.solid.webId,this.config(this.webId);var t=new Date;this.date=this.formatDate(t)},methods:{sendOfferActivity:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,r,s,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.activity),a=new Date,r="Activity_"+a.getTime(),s=a.toISOString(),o=t.formatDate(a),c=t.pubPod+o+".ttl",l={},e.prev=7,e.next=10,Object(n["b"])(c);case 10:l=e.sent,e.next=18;break;case 13:return e.prev=13,e.t0=e["catch"](7),e.next=17,Object(n["a"])(c);case 17:l=e.sent;case 18:return u=l.addSubject({identifier:r}),u.addLiteral(i["e"].label,t.activity["gr:name"]),u.addLiteral(i["a"].created,s),u.addRef(i["d"].type,t.activity["gr:hasBusinessFunction"]),u.addRef(i["d"].type,"http://purl.org/goodrelations/v1#Offering"),u.addRef(i["b"].maker,t.webId),u.addRef("https://www.w3.org/ns/activitystreams#actor",t.webId),u.addLiteral("http://purl.org/goodrelations/v1#name",t.activity["gr:name"]),u.addLiteral("http://purl.org/goodrelations/v1#businessEntity",t.activity["gr:businessEntity"]),u.addLiteral("http://purl.org/goodrelations/v1#description",t.activity["gr:description"]),u.addLiteral("https://www.w3.org/ns/activitystreams#summary",t.activity["gr:name"]),u.addRef("https://www.w3.org/ns/activitystreams#object",t.activity.object.url),u.addLiteral("http://purl.org/goodrelations/v1#hasCurrency",t.activity["gr:hasPriceSpecification"]["gr:hasCurrency"]),u.addLiteral("http://purl.org/goodrelations/v1#hasCurrencyValue",t.activity["gr:hasPriceSpecification"]["gr:hasCurrencyValue"]),e.next=34,l.save();case 34:case"end":return e.stop()}}),e,null,[[7,13]])})))()},sendActivity:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,r,s,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.activity),a=new Date,r="Activity_"+a.getTime(),s=a.toISOString(),o=t.formatDate(a),console.log(t.activity.actor.name,t.activity.type,t.activity.summary,o),c=t.pubPod+o+".ttl",l={},e.prev=8,e.next=11,Object(n["b"])(c);case 11:l=e.sent,e.next=19;break;case 14:return e.prev=14,e.t0=e["catch"](8),e.next=18,Object(n["a"])(c);case 18:l=e.sent;case 19:return t.activity.summary.length<1&&(t.activity.summary=[t.activity.actor.name.split("/").slice(2,3)[0],t.localname(t.activity.type),"a",t.activity.object.type,"with name",t.activity.object.name].join(" ")),u=t.activity.object.type.startsWith("http")?t.activity.object.type:"https://www.w3.org/ns/activitystreams#"+t.activity.object.type,d=l.addSubject({identifier:r}),d.addLiteral(i["e"].label,t.activity.object.name),d.addLiteral(i["a"].created,s),d.addRef(i["b"].maker,t.webId),d.addRef("https://www.w3.org/ns/activitystreams#actor",t.webId),d.addRef(i["d"].type,u),d.addLiteral("https://www.w3.org/ns/activitystreams#summary",t.activity.summary),d.addRef("https://www.w3.org/ns/activitystreams#object",t.activity.object.url),void 0!=t.activity.object.inReplyTo&&d.addRef("https://www.w3.org/ns/activitystreams#inReplyTo",t.activity.object.inReplyTo),"https://www.w3.org/ns/activitystreams#Article"!=u?void 0!=t.currentWorkspace?d.addRef(i["d"].type,t.currentWorkspace.path+t.activity.object.type):d.addRef(i["d"].type,t.activity.object.url+"#"+t.activity.object.type):d.addRef(i["d"].type,t.activity.type),e.next=33,l.save();case 33:case"end":return e.stop()}}),e,null,[[8,14]])})))()},send:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,r,s,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.activity),a=t.pubPod+t.date+".ttl",r=new Date,s="Activity_"+r.getTime(),o=r.toISOString(),c={},e.prev=6,e.next=9,Object(n["b"])(a);case 9:c=e.sent,e.next=17;break;case 12:return e.prev=12,e.t0=e["catch"](6),e.next=16,Object(n["a"])(a);case 16:c=e.sent;case 17:return l=[t.activity.actor.name,t.activity.type,"a",t.activity.object.type,"with name",t.activity.object.name].join(" "),u=c.addSubject({identifier:s}),u.addLiteral(i["e"].label,l),u.addLiteral(i["a"].created,o),u.addRef(i["b"].maker,t.webId),u.addRef("https://www.w3.org/ns/activitystreams#actor",t.webId),u.addRef(i["d"].type,"https://www.w3.org/ns/activitystreams#"+t.activity.type),u.addLiteral("https://www.w3.org/ns/activitystreams#summary",t.activity.summary),u.addRef("https://www.w3.org/ns/activitystreams#object",t.activity.object.url),e.next=28,c.save();case 28:console.log("todo toast when activity saved");case 29:case"end":return e.stop()}}),e,null,[[6,12]])})))()},formatDate:function(t){return[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-")},config:function(t){this.config={},this.config.webId=t}},webId:{webId:function(t){this.config(t)}},computed:{webId:{get:function(){return this.$store.state.solid.webId},set:function(){}},activities:{get:function(){return this.$store.state.agora.activities},set:function(){}}},data:function(){return{as:{core:["Object","Link","Activity","IntransitiveActivity","Collection","OrderedCollection","CollectionPage","OrderedCollectionPage"],activity:["Accept","Add","Announce","Arrive","Block","Create","Delete","Dislike","Flag","Follow","Ignore","Invite","Join","Leave","Like","Listen","Move","Offer","Question","Reject","Read","Remove","TentativeReject","TentativeAccept","Travel","Undo","Update","View"],actor:["Application","Group","Organization","Person","Service"],object:["Article","Audio","Document","Event","Image","Note","Page","Place","Profile","Relationship","Tombstone","Video","Mention"]},pubPod:"https://agora.solidcommunity.net/public/popock/inbox/"}}}},"18cc":function(t,e,a){"use strict";var r=a("1da1"),n=(a("96cf"),a("fd2a")),i=(a("498a"),a("ac1f"),a("5319"),a("d3b7"),a("159b"),a("1276"),a("1404")),s=a("4d8d"),o=a("6dc1"),c=a("00e8"),l=a.n(c),u=a("7fed"),d=a.n(u),p=new d.a(l.a),m={mixins:[n["a"],i["a"]],data:function(){return{}},methods:{createFile:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r,n,i,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.label=t.label.trim(),t.ttl_name=t.label.replace(/\s/g,"_"),e.activity={actor:{name:e.$store.state.solid.webId},type:"Create",summary:"",object:{name:t.label,url:"",type:"Tension"}},a.prev=3,r={},void 0!=t.url){a.next=13;break}return t.url=t.path+t.ttl_name+".ttl",a.next=9,Object(s["a"])(t.url);case 9:r=a.sent,e.activity.type="Create",a.next=17;break;case 13:return a.next=15,Object(s["b"])(t.url);case 15:r=a.sent,e.activity.type="Update";case 17:return n=r.addSubject({identifier:"this"}),i=new Date,c=i.toISOString(),void 0!=t.created?(t.modified=c,n.addLiteral(o["a"].modified,c),n.removeAll(o["e"].label),n.removeAll(o["c"].inbox),n.removeAll("https://holacratie.solidcommunity.net/public/holacratie#whatis",t.wi),n.removeAll("https://holacratie.solidcommunity.net/public/holacratie#whatshouldbe",t.wsb),n.removeAll(o["d"].type),n.removeAll("http://www.w3.org/ns/org#memberOf"),n.removeAll("http://www.w3.org/ns/org#purpose")):(t.created=c,n.addLiteral(o["a"].created,c)),n.addLiteral(o["e"].label,t.label),n.addRef(o["c"].inbox,"./"+t.ttl_name+"/inbox/"),n.addLiteral("https://holacratie.solidcommunity.net/public/holacratie#whatis",t.wi),n.addLiteral("https://holacratie.solidcommunity.net/public/holacratie#whatshouldbe",t.wsb),n.addRef(o["b"].maker,e.$store.state.solid.webId),t.types.forEach((function(t){n.addRef(o["d"].type,t)})),void 0!=t.roles&&(t.roles.split(",").forEach((function(t){n.addLiteral("http://www.w3.org/ns/org#memberOf",t.trim())})),console.log("TODO: must look at existing groups & existing frineds groups & activity published groups")),void 0!=t.domains&&(t.domains.split(",").forEach((function(t){n.addLiteral("http://www.w3.org/ns/org#purpose",t.trim())})),console.log("TODO: must look at https://www.wikidata.org/w/api.php?action=wbsearchentities&language=fr&format=json&search=Ecology")),a.next=31,r.save();case 31:e.makeToast("Created "+t.label,"ok","success"),a.next=38;break;case 34:a.prev=34,a.t0=a["catch"](3),e.makeToast("Error creating "+t.label,a.t0,"danger"),console.log(a.t0);case 38:return"public"==t.privacy&&(e.activity.object.url=t.url,e.sendActivity(),e.makeToast("TODO : must Activity publish",t.label,"success")),a.abrupt("return",t);case 40:case"end":return a.stop()}}),a,null,[[3,34]])})))()},getFolder:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.readFolder(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()}}};e["a"]={mixins:[n["a"],m],data:function(){return{}},methods:{createTension:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tension.displayType="Tension",console.log("TODO use http://purl.org/vocab/lifecycle/schema#Task"),t.tension.types=["http://purl.org/vocab/lifecycle/schema#Task","http://www.w3.org/ns/ldp#Resource"],t.tension.path=t.path,console.log(t.tension,t.path),e.prev=5,e.next=8,t.createFile(t.tension);case 8:a=e.sent,console.log("Result",a),t.tension={privacy:"public"},t.makeToast("success !",t.tension.label+" created !","success"),t.$router.push({name:"Tensions",params:{url:a.url}}),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),t.makeToast("Error !",e.t0,"danger");case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))()},getTensions:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("GET TENSIONS",t.path),e.next=3,t.getFolder(t.path);case 3:return a=e.sent,console.log(a),e.abrupt("return",a.files);case 6:case"end":return e.stop()}}),e)})))()},getTensionDetail:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["b"])(t.url);case 2:return a=e.sent,r=a.getSubject(t.url+"#this"),n=t,n.created=r.getLiteral(o["a"].created),n.label=r.getLiteral(o["e"].label),n.inbox=r.getRef(o["c"].inbox),n.wi=r.getLiteral("https://holacratie.solidcommunity.net/public/holacratie#whatis"),n.wsb=r.getLiteral("https://holacratie.solidcommunity.net/public/holacratie#whatshouldbe"),n.maker=r.getRef(o["b"].maker),n.types=r.getAllRefs(o["d"].type),n.roles=r.getAllLiterals("http://www.w3.org/ns/org#memberOf"),n.domains=r.getAllLiterals("http://www.w3.org/ns/org#purpose"),n.actors=r.getAllRefs("https://www.w3.org/ns/activitystreams#actor"),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})))()}}}},"2ca0":function(t,e,a){"use strict";var r=a("23e7"),n=a("06cf").f,i=a("50c4"),s=a("5a34"),o=a("1d80"),c=a("ab13"),l=a("c430"),u="".startsWith,d=Math.min,p=c("startsWith"),m=!l&&!p&&!!function(){var t=n(String.prototype,"startsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!m&&!p},{startsWith:function(t){var e=String(o(this));s(t);var a=i(d(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return u?u.call(e,r,a):e.slice(a,a+r.length)===r}})},bf19:function(t,e,a){"use strict";var r=a("23e7");r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},c6e4:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modele-view container"},["gouvernance"==t.currentWorkspace.name?a("div",[a("b-list-group",t._l(t.tensions,(function(t){return a("b-list-group-item",{key:t.url},[a("TensionItem",{attrs:{tension:t}})],1)})),1),t._v(" path : "+t._s(t.path)+" ")],1):a("div",[t._v(' To use this part of Popock, you need to choose a workspace with name "gouvernance".'),a("br"),a("b-button",{attrs:{size:"sm",to:"/workspaces",variant:"outline-warning"}},[void 0!=t.currentWorkspace.name?a("span",[t._v(t._s(t.currentWorkspace.name))]):a("span",[t._v("Workspaces ")])])],1)])},n=[],i=a("1da1"),s=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("18cc")),o={name:"TensionsList",mixins:[s["a"]],components:{TensionItem:function(){return a.e("chunk-2d0ab878").then(a.bind(null,"1652"))}},data:function(){return{path:"",tensions:[]}},created:function(){this.currentWorkspace=this.$store.state.workspaces.currentWorkspace,this.update()},methods:{update:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0==t.currentWorkspace.path||"gouvernance"!=t.currentWorkspace.name){e.next=7;break}return console.log(t.currentWorkspace),t.path=t.currentWorkspace.path+"tensions/",e.next=5,t.getTensions();case 5:t.tensions=e.sent,console.log(t.tensions);case 7:case"end":return e.stop()}}),e)})))()}},watch:{currentWorkspace:function(){this.update()}},computed:{currentWorkspace:{get:function(){return this.$store.state.workspaces.currentWorkspace},set:function(){}}}},c=o,l=a("2877"),u=Object(l["a"])(c,r,n,!1,null,null,null);e["default"]=u.exports},d33b:function(t,e,a){"use strict";a("fb6a"),a("bf19");e["a"]={methods:{localname:function(t){var e=t;return void 0!=t&&(e=-1!=t.lastIndexOf("#")?t.substr(t.lastIndexOf("#")).substr(1):t.substr(t.lastIndexOf("/")).substr(1),e=0==e.length?t:e),e},today:function(){var t=new Date;return t.setMinutes(this.getMinutes()-this.getTimezoneOffset()),t.toJSON().slice(0,10)},streamActivity:function(t,e){var a={"@context":"https://www.w3.org/ns/activitystreams",summary:"User fill a form with shighl-vuejs",type:"Add",published:(new Date).toISOString(),actor:{type:"Person",id:t,name:"UserName",url:"same as webid ?",image:{type:"Link",href:"http://example.org/martin/image.jpg",mediaType:"image/jpeg"}},object:{id:"http://www.test.example/blog/abc123/xyz",type:"Document",url:"http://example.org/blog/2011/02/entry",name:"Why I love Activity Streams",content:e},target:{id:"http://example.org/blog/",type:"OrderedCollection",name:"Martin's Blog"}};return a}}}},fd2a:function(t,e,a){"use strict";e["a"]={methods:{makeToast:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(e,{title:t,variant:a,solid:!0})}}}}}]);
//# sourceMappingURL=tensions-list.3e9d1b6a.js.map